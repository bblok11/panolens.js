var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(k){var u=function(){};u.prototype=k;return new u};$jscomp.underscoreProtoCanBeSet=function(){var k={a:!0},u={};try{return u.__proto__=k,u.a}catch(D){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(k,u){k.__proto__=u;if(k.__proto__!==u)throw new TypeError(k+" is not extensible");return k}:null;
$jscomp.inherits=function(k,u){k.prototype=$jscomp.objectCreate(u.prototype);k.prototype.constructor=k;if($jscomp.setPrototypeOf){var D=$jscomp.setPrototypeOf;D(k,u)}else for(D in u)if("prototype"!=D)if(Object.defineProperties){var I=Object.getOwnPropertyDescriptor(u,D);I&&Object.defineProperty(k,D,I)}else k[D]=u[D];k.superClass_=u.prototype};
(function(k,u){"object"===typeof exports&&"undefined"!==typeof module?u(exports,require("three")):"function"===typeof define&&define.amd?define(["exports","three"],u):(k="undefined"!==typeof globalThis?globalThis:k||self,u(k.PANOLENS={},k.THREE))})(this,function(k,u){function D(a){this.constraints=Object.assign({video:{width:{ideal:1920},height:{ideal:1080},facingMode:{exact:"environment"}},audio:!1},a);this.element=this.scene=this.container=null;this.devices=[];this.stream=null;this.ratioScalar=
1;this.videoDeviceIndex=0}function I(a){this._parameters=a=void 0===a?{}:a;this._panoId=this._zoom=null;this._panoClient=new google.maps.StreetViewService;this._total=this._count=0;this._canvas=[];this._ctx=[];this._hc=this._wc=0;this.result=null;this.rotation=0;this.copyright="";this.onPanoramaLoad=this.onSizeChange=null;this.levelsW=[1,2,4,7,13,26];this.levelsH=[1,1,2,4,7,13];this.widths=[416,832,1664,3328,6656,13312];this.heights=[416,416,832,1664,3328,6656];this.maxH=this.maxW=6656;var b;try{var c=
document.createElement("canvas");(b=c.getContext("experimental-webgl"))||(b=c.getContext("webgl"))}catch(d){}this.maxW=Math.max(b.getParameter(b.MAX_TEXTURE_SIZE),this.maxW);this.maxH=Math.max(b.getParameter(b.MAX_TEXTURE_SIZE),this.maxH)}function T(a,b){function c(a){R=!1;O=P=0;if(!1!==f.enabled){a.preventDefault();if(a.button===f.mouseButtons.ORBIT){if(!0===f.noRotate)return;C=A.ROTATE;J.set(a.clientX,a.clientY)}else if(a.button===f.mouseButtons.ZOOM){if(!0===f.noZoom)return;C=A.DOLLY;x.set(a.clientX,
a.clientY)}else if(a.button===f.mouseButtons.PAN){if(!0===f.noPan)return;C=A.PAN;t.set(a.clientX,a.clientY)}C!==A.NONE&&(document.addEventListener("mousemove",d,!1),document.addEventListener("mouseup",h,!1),f.dispatchEvent(S));f.update()}}function d(a){if(!1!==f.enabled){a.preventDefault();var b=f.domElement===document?f.domElement.body:f.domElement;if(C===A.ROTATE){if(!0===f.noRotate)return;l.set(a.clientX,a.clientY);p.subVectors(l,J);f.rotateLeft(2*Math.PI*p.x/b.clientWidth*f.rotateSpeed);f.rotateUp(2*
Math.PI*p.y/b.clientHeight*f.rotateSpeed);J.copy(l);K&&(O=a.clientX-K.clientX,P=a.clientY-K.clientY);K=a}else if(C===A.DOLLY){if(!0===f.noZoom)return;y.set(a.clientX,a.clientY);z.subVectors(y,x);0<z.y?f.dollyIn():0>z.y&&f.dollyOut();x.copy(y)}else if(C===A.PAN){if(!0===f.noPan)return;r.set(a.clientX,a.clientY);u.subVectors(r,t);f.pan(u.x,u.y);t.copy(r)}C!==A.NONE&&f.update()}}function h(){R=!0;K=void 0;!1!==f.enabled&&(document.removeEventListener("mousemove",d,!1),document.removeEventListener("mouseup",
h,!1),f.dispatchEvent(Y),C=A.NONE)}function n(a){if(!1!==f.enabled&&!0!==f.noZoom&&C===A.NONE){a.preventDefault();a.stopPropagation();var b=0;void 0!==a.wheelDelta?b=a.wheelDelta:void 0!==a.detail&&(b=-a.detail);a=0<b;b=0>b;if(f.revertZoomScrollDirection?!a:a)f.object.fov=f.object.fov<f.maxFov?f.object.fov+1:f.maxFov,f.object.updateProjectionMatrix();else if(f.revertZoomScrollDirection?!b:b)f.object.fov=f.object.fov>f.minFov?f.object.fov-1:f.minFov,f.object.updateProjectionMatrix();f.update();f.dispatchEvent(U);
f.dispatchEvent(S);f.dispatchEvent(Y)}}function E(a){switch(a.keyCode){case f.keys.UP:N=!1;break;case f.keys.BOTTOM:Q=!1;break;case f.keys.LEFT:W=!1;break;case f.keys.RIGHT:X=!1}}function v(a){if(!1!==f.enabled&&!0!==f.noKeys&&!0!==f.noRotate){switch(a.keyCode){case f.keys.UP:N=!0;break;case f.keys.BOTTOM:Q=!0;break;case f.keys.LEFT:W=!0;break;case f.keys.RIGHT:X=!0}if(N||Q||W||X)R=!0,N&&(P=-f.rotateSpeed*f.momentumKeydownFactor),Q&&(P=f.rotateSpeed*f.momentumKeydownFactor),W&&(O=-f.rotateSpeed*f.momentumKeydownFactor),
X&&(O=f.rotateSpeed*f.momentumKeydownFactor)}}function m(a){R=!1;O=P=0;if(!1!==f.enabled){switch(a.touches.length){case 1:if(!0===f.noRotate)return;C=A.TOUCH_ROTATE;J.set(a.touches[0].pageX,a.touches[0].pageY);break;case 2:if(!0===f.noZoom)return;C=A.TOUCH_DOLLY;var b=a.touches[0].pageX-a.touches[1].pageX;a=a.touches[0].pageY-a.touches[1].pageY;x.set(0,Math.sqrt(b*b+a*a));break;case 3:if(!0===f.noPan)return;C=A.TOUCH_PAN;t.set(a.touches[0].pageX,a.touches[0].pageY);break;default:C=A.NONE}C!==A.NONE&&
f.dispatchEvent(S)}}function g(a){if(!1!==f.enabled){a.preventDefault();a.stopPropagation();var b=f.domElement===document?f.domElement.body:f.domElement;switch(a.touches.length){case 1:if(!0===f.noRotate)break;if(C!==A.TOUCH_ROTATE)break;l.set(a.touches[0].pageX,a.touches[0].pageY);p.subVectors(l,J);f.rotateLeft(2*Math.PI*p.x/b.clientWidth*f.rotateSpeed);f.rotateUp(2*Math.PI*p.y/b.clientHeight*f.rotateSpeed);J.copy(l);K&&(O=a.touches[0].pageX-K.pageX,P=a.touches[0].pageY-K.pageY);K={pageX:a.touches[0].pageX,
pageY:a.touches[0].pageY};f.update();break;case 2:if(!0===f.noZoom)break;if(C!==A.TOUCH_DOLLY)break;b=a.touches[0].pageX-a.touches[1].pageX;a=a.touches[0].pageY-a.touches[1].pageY;y.set(0,Math.sqrt(b*b+a*a));z.subVectors(y,x);0>z.y?(f.object.fov=f.object.fov<f.maxFov?f.object.fov+1:f.maxFov,f.object.updateProjectionMatrix()):0<z.y&&(f.object.fov=f.object.fov>f.minFov?f.object.fov-1:f.minFov,f.object.updateProjectionMatrix());x.copy(y);f.update();f.dispatchEvent(U);break;case 3:if(!0===f.noPan)break;
if(C!==A.TOUCH_PAN)break;r.set(a.touches[0].pageX,a.touches[0].pageY);u.subVectors(r,t);f.pan(u.x,u.y);t.copy(r);f.update();break;default:C=A.NONE}}}function k(){R=!0;K=void 0;!1!==f.enabled&&(f.dispatchEvent(Y),C=A.NONE)}this.object=a;this.domElement=void 0!==b?b:document;this.frameId=null;this.enabled=!0;this.center=this.target=new e.Vector3;this.noZoom=!1;this.zoomSpeed=1;this.revertZoomScrollDirection=!1;this.minDistance=0;this.maxDistance=Infinity;this.minZoom=0;this.maxZoom=Infinity;this.noRotate=
!1;this.rotateSpeed=-.15;this.noPan=!0;this.keyPanSpeed=7;this.autoRotate=!1;this.autoRotateSpeed=2;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.momentumDampingFactor=.9;this.momentumScalingFactor=-.005;this.momentumKeydownFactor=20;this.minFov=30;this.maxFov=120;this.minAzimuthAngle=-Infinity;this.maxAzimuthAngle=Infinity;this.noKeys=!1;this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};this.mouseButtons={ORBIT:e.MOUSE.LEFT,ZOOM:e.MOUSE.MIDDLE,PAN:e.MOUSE.RIGHT};var f=this,J=new e.Vector2,l=new e.Vector2,
p=new e.Vector2,t=new e.Vector2,r=new e.Vector2,u=new e.Vector2,w=new e.Vector3,q=new e.Vector3,x=new e.Vector2,y=new e.Vector2,z=new e.Vector2,B=0,L=0,D=0,F=0,G=1,H=new e.Vector3,I=new e.Vector3,M=new e.Quaternion,O=0,P=0,K,R=!1,N,Q,W,X,A={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},C=A.NONE;this.target0=this.target.clone();this.position0=this.object.position.clone();this.zoom0=this.object.zoom;var T=(new e.Quaternion).setFromUnitVectors(a.up,new e.Vector3(0,1,0)),V=
T.clone().invert(),U={type:"change"},S={type:"start"},Y={type:"end"};this.setLastQuaternion=function(a){M.copy(a);f.object.quaternion.copy(a)};this.getLastPosition=function(){return I};this.rotateLeft=function(a){void 0===a&&(a=2*Math.PI/60/60*f.autoRotateSpeed);F-=a};this.rotateUp=function(a){void 0===a&&(a=2*Math.PI/60/60*f.autoRotateSpeed);D-=a};this.panLeft=function(a){var b=this.object.matrix.elements;w.set(b[0],b[1],b[2]);w.multiplyScalar(-a);H.add(w)};this.panUp=function(a){var b=this.object.matrix.elements;
w.set(b[4],b[5],b[6]);w.multiplyScalar(a);H.add(w)};this.pan=function(a,b){var d=f.domElement===document?f.domElement.body:f.domElement;if(f.object instanceof e.PerspectiveCamera){var c=f.object.position.clone().sub(f.target).length();c*=Math.tan(f.object.fov/2*Math.PI/180);f.panLeft(2*a*c/d.clientHeight);f.panUp(2*b*c/d.clientHeight)}else f.object instanceof e.OrthographicCamera?(f.panLeft(a*(f.object.right-f.object.left)/d.clientWidth),f.panUp(b*(f.object.top-f.object.bottom)/d.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")};
this.momentum=function(){R&&(1E-4>Math.abs(O)&&1E-4>Math.abs(P)?R=!1:(P*=this.momentumDampingFactor,O*=this.momentumDampingFactor,F-=this.momentumScalingFactor*O,D-=this.momentumScalingFactor*P))};this.dollyIn=function(a){void 0===a&&(a=Math.pow(.95,f.zoomSpeed));f.object instanceof e.PerspectiveCamera?G/=a:f.object instanceof e.OrthographicCamera?(f.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*a)),f.object.updateProjectionMatrix(),f.dispatchEvent(U)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")};
this.dollyOut=function(a){void 0===a&&(a=Math.pow(.95,f.zoomSpeed));f.object instanceof e.PerspectiveCamera?G*=a:f.object instanceof e.OrthographicCamera?(f.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/a)),f.object.updateProjectionMatrix(),f.dispatchEvent(U)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")};this.update=function(a){var b=this.object.position;q.copy(b).sub(this.target);q.applyQuaternion(T);B=Math.atan2(q.x,
q.z);L=Math.atan2(Math.sqrt(q.x*q.x+q.z*q.z),q.y);this.autoRotate&&C===A.NONE&&this.rotateLeft(2*Math.PI/60/60*f.autoRotateSpeed);this.momentum();B+=F;L+=D;B=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,B));L=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,L));L=Math.max(1E-7,Math.min(Math.PI-1E-7,L));var d=q.length()*G;d=Math.max(this.minDistance,Math.min(this.maxDistance,d));this.target.add(H);q.x=d*Math.sin(L)*Math.sin(B);q.y=d*Math.cos(L);q.z=d*Math.sin(L)*Math.cos(B);q.applyQuaternion(V);
b.copy(this.target).add(q);this.object.lookAt(this.target);D=F=0;G=1;H.set(0,0,0);if(1E-7<I.distanceToSquared(this.object.position)||1E-7<8*(1-M.dot(this.object.quaternion)))!0!==a&&this.dispatchEvent(U),I.copy(this.object.position),M.copy(this.object.quaternion)};this.reset=function(){C=A.NONE;this.target.copy(this.target0);this.object.position.copy(this.position0);this.object.zoom=this.zoom0;this.object.updateProjectionMatrix();this.dispatchEvent(U);this.update()};this.getPolarAngle=function(){return L};
this.getAzimuthalAngle=function(){return B};this.dispose=function(){this.domElement.removeEventListener("mousedown",c);this.domElement.removeEventListener("mousewheel",n);this.domElement.removeEventListener("DOMMouseScroll",n);this.domElement.removeEventListener("touchstart",m);this.domElement.removeEventListener("touchend",k);this.domElement.removeEventListener("touchmove",g);window.removeEventListener("keyup",E);window.removeEventListener("keydown",v)};this.domElement.addEventListener("mousedown",
c,{passive:!1});this.domElement.addEventListener("mousewheel",n,{passive:!1});this.domElement.addEventListener("DOMMouseScroll",n,{passive:!1});this.domElement.addEventListener("touchstart",m,{passive:!1});this.domElement.addEventListener("touchend",k,{passive:!1});this.domElement.addEventListener("touchmove",g,{passive:!1});window.addEventListener("keyup",E,{passive:!1});window.addEventListener("keydown",v,{passive:!1});this.update()}function V(a,b){var c=this,d={type:"change"},h=0,n=0,E=0,v=0;this.camera=
a;this.camera.rotation.reorder("YXZ");this.domElement=void 0!==b?b:document;this.enabled=!0;this.deviceOrientation={};this.alphaOffsetAngle=this.alpha=this.screenOrientation=0;var m=function(a){c.deviceOrientation=a},g=function(){c.screenOrientation=window.orientation||0},k=function(a){a.preventDefault();a.stopPropagation();E=a.touches[0].pageX;v=a.touches[0].pageY},f=function(a){a.preventDefault();a.stopPropagation();h+=e.Math.degToRad((a.touches[0].pageX-E)/4);n+=e.Math.degToRad((v-a.touches[0].pageY)/
4);c.updateAlphaOffsetAngle(h);E=a.touches[0].pageX;v=a.touches[0].pageY};this.connect=function(){g();window.addEventListener("orientationchange",g,{passive:!0});window.addEventListener("deviceorientation",m,{passive:!0});window.addEventListener("deviceorientation",this.update.bind(this),{passive:!0});c.domElement.addEventListener("touchstart",k,{passive:!1});c.domElement.addEventListener("touchmove",f,{passive:!1});c.enabled=!0};this.disconnect=function(){window.removeEventListener("orientationchange",
g,!1);window.removeEventListener("deviceorientation",m,!1);window.removeEventListener("deviceorientation",this.update.bind(this),!1);c.domElement.removeEventListener("touchstart",k,!1);c.domElement.removeEventListener("touchmove",f,!1);c.enabled=!1};this.update=function(a){if(!1!==c.enabled){var b=c.deviceOrientation.alpha?e.Math.degToRad(c.deviceOrientation.alpha)+c.alphaOffsetAngle:0,h=c.deviceOrientation.beta?e.Math.degToRad(c.deviceOrientation.beta):0,f=c.deviceOrientation.gamma?e.Math.degToRad(c.deviceOrientation.gamma):
0,E=c.screenOrientation?e.Math.degToRad(c.screenOrientation):0,v=c.camera.quaternion,m=new e.Vector3(0,0,1),g=new e.Euler,k=new e.Quaternion,J=new e.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5)),l=new e.Quaternion,ca=new e.Quaternion;if(0==c.screenOrientation){var p=new e.Vector3(1,0,0);l.setFromAxisAngle(p,-n)}else 180==c.screenOrientation?(p=new e.Vector3(1,0,0),l.setFromAxisAngle(p,n)):90==c.screenOrientation?(p=new e.Vector3(0,1,0),l.setFromAxisAngle(p,n)):-90==c.screenOrientation&&(p=new e.Vector3(0,
1,0),l.setFromAxisAngle(p,-n));J.multiply(l);J.multiply(ca);g.set(h,b,-f,"YXZ");v.setFromEuler(g);v.multiply(J);v.multiply(k.setFromAxisAngle(m,-E));c.alpha=b;!0!==a&&c.dispatchEvent(d)}};this.updateAlphaOffsetAngle=function(a){this.alphaOffsetAngle=a;this.update()};this.dispose=function(){this.disconnect()};this.connect()}var e=function(a){if(a&&a.__esModule)return a;var b=Object.create(null);a&&Object.keys(a).forEach(function(c){if("default"!==c){var d=Object.getOwnPropertyDescriptor(a,c);Object.defineProperty(b,
c,d.get?d:{enumerable:!0,get:function(){return a[c]}})}});b["default"]=a;return Object.freeze(b)}(u);u="^0.136".replace(/[^0-9.]/g,"");var M={ORBIT:0,DEVICEORIENTATION:1},q={UNKNOWN:0,NORMAL:1,CARDBOARD:2,STEREO:3},y={Info:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAABAAAAAQADq8/hgAAADBklEQVR42u2bP08UQRiHnzFaSYCI/xoksdBIqGwIiYWRUBISExpCQ0ej38FWOmlIKKhoMPEbaCxsrrHiYrQgOSlQEaICrT+LHSPZzNzt3s3c3Hn7lHvLzvv82L2dm30XKioqKgYY062BJF0HpoA7wARwBbhsPz4DjoEG8AnYNcZ8Sx1Op8IXJM1KWpdUV3nq9m9nJV1I7VNGfEzSM0mNNqR9NOwxx1L7NRMflbQm6SSgeJ4TO8Zoat+8/LKkg4jieQ4kLaf2RtKwpJ0uiufZkTScSn5S0l5C+b/sSZrstvyMpKPU5uc4kjTTjkvpeYCkaeA1/+7hvcIZMGuMqUULQNIU8Aa4ltrWwyHwyBizGzwASSPAe+B2assW7AH3jTE/i+xcZoa12Qfy2Bo3i+5cKABl99zF1GYlWFTBeULLS0DZrOsDcDNggTXgc27bLWA64BhfgHvGmB8dHUXZ1DM0S45xliKMs9bKr+klIOkqsBrwv9JtVq1DewEAT4Ch1BYdMGQdygeg7Df4SmqDAKyoyXpCszPgITCeuvoAjFuX0gE8jljUdv7bCtiOOJ7XpdUZ8L/gdXHOA5QtYH5NXXVgbrgWWn1nwFTqaiPgdPIFcDd1tRFwOl307DwRuZgXwLvctgfA04hjOp18AcReZ6sZY16e3yDpUuQxnU6+S2AkcjEpcDr1zxOXSPgCKLSa0mc4nXwB/EpdbQScTr4AGqmrjYDTyRfAx9TVRsDp5Aug8LJyH+F0cgZg58z11BUHpO5ruGh2G3ybuuqAeF2aBfAqddUB8bq0OgP2U1cegH3aOQOMMb+BrdTVB2DLupQLwLIOnKY26IBT6+ClaQDGmO/ARmqLDtiwDn7HVkcY+EdjNoTlCI+tYhO2iUppm6HKslPUq2qQKHpUe8AFsjaUXuUQWCgqXyoAG8IuME/WkNRrnAHzZfqDSgdgQ6gBc2Td3b3CMTBXtkOsIzTIjZLnQhjcVtlcEIPZLJ0LoVvt8s/Va+3yuSAG84UJRxB98cpM9dJURUVFxSDzBxKde4Lk3/h2AAAAAElFTkSuQmCC",
Arrow:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAABAAAAAQADq8/hgAAADPklEQVR42u2bMUscQRiG30/SRaJEI1ZKUiRErNIELRUbQYSAnX8hpVUgkDYp0wgWVjYW+QcJaQzYpLojJIXhtDDEKBpj65ti58ixmdmb2ZvZ7+T2AUHudmfmeXf2bnb3O6CmpqZmgJGqOiI5AWAWwEMA0wDuArht3r4CcAagBeAbgIaI/NQOp1fhIZKLJN+SbDKcptl3keSQtk+I+BjJVyRbJaRdtEybY9p+ReKjJN+QvIwonufS9DGq7ZuXXyd5nFA8zzHJdW1vkLxDcrdC8Ty7JO9oyc+QPFCUb3NAcqZq+TmSp9rmHZySnCvjErwOIPkUwHv8+w7vF64ALIrIfrIASM4C+ADgnratgxMACyLSiB4AyREAnwE80LbswgGAJyJy4bNxyApr6wbIw4xxy3djrwCYfeeuaZsFsEbPdULXU4DZqusLgMkEA21P05EEbf8A8FhEzos28pkBLxLKL5s/r/M1kEkz9vKQHGeatf05yfmOfubNa7G5JDle5NhtBjwHMBz5yFwAWBaRT+0XzP8pZsKwcQiH2fX8Ycojb+kzxUw4ZJn7CSQXqpRPHMKCq7+iZJ71Mvdy/DftXSQ6HcJdSDaqPPKW/mPOBO+lcbvzCU35RCFM2PpwnQKzZQfdgfe0dxH5dLA6uQJ4pC2fIASrkyuA6X6QjxyC1ckVQNn7bNHlI4ZgdXIFUObiJJl8pBCsTjGfuIwA2Cv4FN7xbYjkjqsRAHuIePXoCiDF1Zk2VidXAL+1R5sAq5MrgJb2aBNgdXIF8FV7tAmwOrkCCFs73wysTtYATHFCU3vEEWm6Ci6KvgY/ao86Ik6XogDeaY86Ik6XbjPgSHvkEThCwQy45XpDRK5JbgN4GWkgUyR9H65MRQxgW0SunZ5FezK7pfwd8e8MV8UfAPdF5Jdrg8JrAbPjprZFD2wWyQP6j8ZSEufRmGlgQ9umBBvd5IOgbjFUKLu+XnWBhG+rpsFVZGUo/coJgFVf+aAATAgNACvICpL6jSsAKyH1QcEBmBD2ASwhq+7uF84ALIVWiPUEB7lQsiOEwS2VzQUxmMXSuRCqKpd/zX4rl88FMZg/mLAEcSN+MlP/aKqmpqZmkPkL0hSjwOpNKxwAAAAASUVORK5CYII=",
FullscreenEnter:"data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KICAgIDxwYXRoIGQ9Ik03IDE0SDV2NWg1di0ySDd2LTN6bS0yLTRoMlY3aDNWNUg1djV6bTEyIDdoLTN2Mmg1di01aC0ydjN6TTE0IDV2MmgzdjNoMlY1aC01eiIvPgo8L3N2Zz4=",FullscreenLeave:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTE0LDE0SDE5VjE2SDE2VjE5SDE0VjE0TTUsMTRIMTBWMTlIOFYxNkg1VjE0TTgsNUgxMFYxMEg1VjhIOFY1TTE5LDhWMTBIMTRWNUgxNlY4SDE5WiIgLz48L3N2Zz4=",
VideoPlay:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTgsNS4xNFYxOS4xNEwxOSwxMi4xNEw4LDUuMTRaIiAvPjwvc3ZnPg==",VideoPause:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTE0LDE5LjE0SDE4VjUuMTRIMTRNNiwxOS4xNEgxMFY1LjE0SDZWMTkuMTRaIiAvPjwvc3ZnPg==",
WhiteTile:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIABAMAAAAGVsnJAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAB1WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjE8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+MjwvdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KAtiABQAAACRQTFRFAAAAAAAABgYGBwcHHh4eKysrx8fHy8vLzMzM7OzsAAAABgYG+q7SZgAAAAp0Uk5TAP7+/v7+/v7+/iJx/a8AAAOwSURBVHja7d0hbsNAEAVQo6SFI6XEcALDcgNLvUBvEBQVhpkWVYWlhSsVFS7t5QIshRt695lEASZP+8c7a1kzDL1fz+/zyuvzp6FbvoddrL6uDd1yGZ5eXldeb18N3fIx7A+58prmhm65DfvDcd0952lu6JabFbD/zVprZj1lzcys+fj9z8xTZtbT8rv8yWlu6BYAIgAAAAAAAAAAAABAM6QXEAEAAAAAAAAAgJ2gnaAIiIA3Q2qAGgAAAAAAAAAAAAAAAAAAAAAAAAAAQJsADkVFAAAAAAA8Bj0GRUAEREAEREAEREAEREAEAAAAAAAAAAB2gnaCIiACPplRA9QANUAERAAAAEVQERQBERCBVlfAcZ3aeZobusUKMGBhV6KUElHGKBERJR6/fxExRkQZl9/lT8S1oVsuhqyYMmPKjCkzvfcCpsxohrwY0Q06EAEAAAAAAAAAAACgGdILiAAAAAAAAAAAwE7QTlAERMCbITVADQAAAAAAAAAAAAAAAAAAAAAAAAAAwKmwQ1ERAAAAAACPQY9BERABERABERABERABERABAAAAAAAAAICdoJ2gCIiAT2bUADVADRABEQAAQBFUBEVABERgEyvAlJm+V4ApM6bMmDJjyowpM6bMdN0LmDKjGfJiRDfoQAQAAAAAAAAAAACAZkgvIAIAAAAAAAAAADtBO0EREAFvhtQANQAAAAAAAAAAAAAAAAAAAAAAAAAAAKfCDkVFAAAAAAA8Bj0GRUAEREAEREAEREAEREAEAAAAAAAAAAB2gnaCIiACPplRA9QANUAERAAAAEVQERQBERCBTawAU2b6XgGmzJgyY8qMKTOmzJgy03UvYMqMZsiLEd2gAxEAAAAAAAAAAAAAmiG9gAgAAAAAAAAAAOwE7QRFQAS8GVID1AAAAAAAAAAAAAAAAAAAAAAAAAAAAJwKOxQVAQAAAADwGPQYFAEREAEREAEREAEREAERAAAAAAAAAADYCdoJioAI+GRGDVAD1AAREAEAABRBRVAEREAENrECTJnpewWYMmPKjCkzpsyYMmPKTNe9gCkzmiEvRnSDDkQAAAAAAAAAAAAAaIb0AiIAAAAAAAAAALATtBMUARHwZkgNUAMAAAAAAAAAAAAAAAAAAAAAAAAAAHAq7FBUBAAAAADAY9BjUAREQAREQAREQAREQAREAAAAAAAAAABgJ2gnKAIi4JMZNUANUANEQAQAAFAEFUEREAER2MQKMGWm7xVgyowpM50PWen9ugNGXz1XaocAFgAAAABJRU5ErkJggg==",
Setting:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAABAAAAAQADq8/hgAAADn0lEQVR42u2bzUsVURjGnyO6CPzAMnTjppAo3LTwH1CqTfaxbeOiRS37A0wXtROFVi1aRBs3LWohSIGbQAQXViBGRhG0UIRKUCpK7q/FnOB2uc6cOXNmRnGe3eW+H8/7zLln3vNxpQoVKlQ4wjBFJAFOSRqX1O7osivpvjHmU1nChBZglvSYLYJbS0EanCvIJzWK+gnsyH34/8OuMaYjb265jwCgz6N4SWq3vodbAEmnS/KtBDgoAgyU5BteAOAkMAPcBroc7PskDWfgN+wyDwBdltMMcDI3tYBnde/pHeARMNTErgd4APzweP834oeN1dMkz5DlsFNn/yyv4kdiSK4At4AO4CqwGaDwRmza2B0210qM7YhrXU59ANAq6bWkwQTTn5KO5fIE0uVYlXTeGLOXFMx1DrjlULwKKN41x6DlnIjEEQCckPRe0okCiguJr5LOGGO+xhm5jICJQ1i8LOeJJKPYEQAMKvrtt5ZdjSf2FM0Fq/sZJI2A6UNcvCz36TiDfUcAcE1SPu/U6Mm8k/TFfu6XdFb5iX3dGPM8lQfwNod3+TowBnQ3yddtv1vPIe+b1JIBiwEJ1IAJ208k5W21trWA+V/5CHAcmAtU/A2P/DcCiTAHHE8tgCVhgLvAXgYCk17Jo/yTGfLuWe7Zd72AC8CWB4n3OAz7mLytNkZabAEXMhfeQKYfWEpJZCxA3rGUOZeA/qDF15FpAz47EvlNk9neI2e3jeWCz0BbmvipNkSMMX8kuSZYM8Z8zyqAjbHmaN5mOeYjgIXrU93MWrxHrNQjrqiDkQMLHwG+OdqF3NN3jeXKzU8AoF1SzdH8XKhJUO7HZDXLMbwAwICkJUULFxe0SbqSVQAbw3Xi7Ze0ZLmGAzAKbHs0JGU1QtvAaIjCW4B7ZOvJy2qFa5a730RPtBiaz0CgnkiZi6F5fBZDVMvho7EhcuS3xJJ2hV9IupgTqaLw0hhzab8vq23xOG/r+LDsKjLgYVzxUnU0ltwK2wDezUyJmEwqXgp/PL4rvxthaeCSI+zxuA10J8ZkWdJNSb2SLkvayKHwDRu71+ZajrG941J8agALDQ3GU/a/IvMkYCPzmCbtLNEVmacNtgs5iP9fYVNEV1Q6Hez7yNZSL+J2SarTcpqiyV2iUkG0IvPFvbz5FbEn+KEk3wMjwMeSfCsBXFBdly9CAPk9ydyffpECuB5tZfVJjaKWueOSfinln6YK4lahQoUKRxd/AcRPGTcQCAUQAAAAAElFTkSuQmCC",
ChevronRight:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTguNTksMTYuNThMMTMuMTcsMTJMOC41OSw3LjQxTDEwLDZMMTYsMTJMMTAsMThMOC41OSwxNi41OFoiIC8+PC9zdmc+",
Check:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTIxLDdMOSwxOUwzLjUsMTMuNUw0LjkxLDEyLjA5TDksMTYuMTdMMTkuNTksNS41OUwyMSw3WiIgLz48L3N2Zz4=",
ViewIndicator:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBpZD0idmlldy1pbmRpY2F0b3IiIGhlaWdodD0iMzAiIHdpZHRoPSIzMCIgdmlld0JveD0iLTIuNSAtMSAzMCAzMCI+Cgk8c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5zdDB7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6MTA7ZmlsbDpub25lO30uc3Qxe3N0cm9rZS13aWR0aDo2O3N0cm9rZS1taXRlcmxpbWl0OjEwO30KCTwvc3R5bGU+Cgk8Zz4KCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNIDEyLjUgMCBBIDEyLjUgMTIuNSAwIDAgMCAtMTIuNSAwIEEgMTIuNSAxMi41IDAgMCAwIDEyLjUgMCIgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsMSwxMywxNS41KSI+PC9wYXRoPgoJCTxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0gMTMgMCBMIDEwIDIgTCAxNiAyIFoiPjwvcGF0aD4KCQk8cGF0aCBjbGFzcz0ic3QyIiBkPSJNIDIgMCBBIDIgMiAwIDAgMCAtMiAwIEEgMiAyIDAgMCAwIDIgMCIgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsMSwxMywxNS41KSI+PC9wYXRoPgoJCTxwYXRoIGNsYXNzPSJzdDEiIGlkPSJpbmRpY2F0b3IiIHRyYW5zZm9ybT0ibWF0cml4KDEsMCwwLDEsMTMsMTUuNSkiPjwvcGF0aD4KCTwvZz4KPC9zdmc+"},
S={load:function(a,b,c,d){b=void 0===b?function(){}:b;c=void 0===c?function(){}:c;d=void 0===d?function(){}:d;e.Cache.enabled=!0;var h,n,E,v;for(v in y)y.hasOwnProperty(v)&&a===y[v]&&(h=v);var m=e.Cache.get(h?h:a);if(void 0!==m)return b&&(m.complete&&m.src?setTimeout(function(){c({loaded:1,total:1});b(m)},0):m.addEventListener("load",function(){c({loaded:1,total:1});b(m)},!1)),m;var g=window.URL||window.webkitURL;var k=document.createElementNS("http://www.w3.org/1999/xhtml","img");e.Cache.add(h?h:
a,k);var f=function(){g.revokeObjectURL(k.src);b(k)};if(0===a.indexOf("data:"))return k.addEventListener("load",f,!1),k.src=a,k;k.crossOrigin=void 0!==this.crossOrigin?this.crossOrigin:"";h=new window.XMLHttpRequest;h.open("GET",a,!0);h.responseType="arraybuffer";h.addEventListener("error",d);h.addEventListener("progress",function(a){if(a){var b=a.loaded,d=a.total;a.lengthComputable&&c({loaded:b,total:d})}});h.addEventListener("loadend",function(a){a&&(n=new Uint8Array(a.currentTarget.response),E=
new window.Blob([n]),k.addEventListener("load",f,!1),k.src=g.createObjectURL(E))});h.send(null)}},Q={load:function(a,b,c,d){b=void 0===b?function(){}:b;var h=new e.Texture;S.load(a,function(d){h.image=d;d=0<a.search(/\.(jpg|jpeg)$/)||0===a.search(/^data:image\/jpeg/);h.format=d?e.RGBFormat:e.RGBAFormat;h.needsUpdate=!0;b(h)},c,d);return h}},Z={load:function(a,b,c,d){b=void 0===b?function(){}:b;c=void 0===c?function(){}:c;var h;var n=new e.CubeTexture([]);var E=0;var v={};var m={};a.map(function(a,
e){S.load(a,function(a){n.images[e]=a;E++;6===E&&(n.needsUpdate=!0,b(n))},function(a){v[e]={loaded:a.loaded,total:a.total};m.loaded=0;h=m.total=0;for(var b in v)h++,m.loaded+=v[b].loaded,m.total+=v[b].total;6>h&&(m.total=m.total/h*6);c(m)},d)});return n}};D.prototype=Object.assign(Object.create(e.EventDispatcher.prototype),{setContainer:function(a){this.container=a},setScene:function(a){this.scene=a},enumerateDevices:function(){var a=this.devices,b=new Promise(function(b){b(a)});return 0<a.length?
b:window.navigator.mediaDevices.enumerateDevices()},switchNextVideoDevice:function(){var a=this.stop.bind(this),b=this.start.bind(this),c=this.setVideDeviceIndex.bind(this),d=this.videoDeviceIndex;this.getDevices("video").then(function(h){a();d++;d>=h.length?(c(0),d--):c(d);b(h[d])})},getDevices:function(a){a=void 0===a?"video":a;var b=this.devices;return this.enumerateDevices().then(function(a){return a.map(function(a){b.includes(a)||b.push(a);return a})}).then(function(b){var d=new RegExp(a,"i");
return b.filter(function(a){return d.test(a.kind)})})},getUserMedia:function(a){var b=this.setMediaStream.bind(this),c=this.playVideo.bind(this);return window.navigator.mediaDevices.getUserMedia(a).then(b).then(c).catch(function(a){console.warn("PANOLENS.Media: "+a)})},setVideDeviceIndex:function(a){this.videoDeviceIndex=a},start:function(a){var b=this.constraints,c=this.getUserMedia.bind(this);this.element=this.createVideoElement();return this.getDevices().then(function(d){if(!d||0===d.length)throw Error("no video device found");
b.video.deviceId=(a||d[0]).deviceId;return c(b)})},stop:function(){var a=this.stream;a&&a.active&&(a.getTracks()[0].stop(),window.removeEventListener("resize",this.onWindowResize.bind(this)),this.stream=this.element=null)},setMediaStream:function(a){this.stream=a;this.element.srcObject=a;this.scene&&(this.scene.background=this.createVideoTexture());window.addEventListener("resize",this.onWindowResize.bind(this))},playVideo:function(){var a=this.element;a&&(a.play(),this.dispatchEvent({type:"play"}))},
pauseVideo:function(){var a=this.element;a&&(a.pause(),this.dispatchEvent({type:"pause"}))},createVideoTexture:function(){var a=this.element,b=new e.VideoTexture(a);b.generateMipmaps=!1;b.minFilter=e.LinearFilter;b.magFilter=e.LinearFilter;b.format=e.RGBFormat;b.center.set(.5,.5);a.addEventListener("canplay",this.onWindowResize.bind(this));return b},createVideoElement:function(){var a=this.dispatchEvent.bind(this),b=document.createElement("video");b.setAttribute("autoplay","");b.setAttribute("muted",
"");b.setAttribute("playsinline","");b.style.position="absolute";b.style.top="0";b.style.left="0";b.style.width="100%";b.style.height="100%";b.style.objectPosition="center";b.style.objectFit="cover";b.style.display=this.scene?"none":"";b.addEventListener("canplay",function(){return a({type:"canplay"})});return b},onWindowResize:function(){if(this.element&&this.element.videoWidth&&this.element.videoHeight&&this.scene){var a=this.container,b=a.clientWidth;a=a.clientHeight;var c=this.scene.background,
d=this.element;d=d.videoHeight/d.videoWidth*(this.container?b/a:1)*this.ratioScalar;b>a?c.repeat.set(d,1):c.repeat.set(1,1/d)}}});var B=function(a,b,c){a=void 0===a?16777215:a;b=void 0===b?!0:b;c=void 0===c?1500:c;var d=B.createCanvas(window.devicePixelRatio),h=d.canvas;d=d.context;var n=new e.SpriteMaterial({color:a,map:B.createCanvasTexture(h)});n=e.Sprite.call(this,n)||this;n.dpr=window.devicePixelRatio;n.canvasWidth=h.width;n.canvasHeight=h.height;n.context=d;n.color=a instanceof e.Color?a:new e.Color(a);
n.autoSelect=b;n.dwellTime=c;n.rippleDuration=500;n.position.z=-10;n.center.set(.5,.5);n.scale.set(.5,.5,1);n.startTimestamp=null;n.timerId=null;n.callback=null;n.frustumCulled=!1;n.updateCanvasArcByProgress(0);return n};$jscomp.inherits(B,e.Sprite);B.prototype.setColor=function(a){this.material.color.copy(a instanceof e.Color?a:new e.Color(a))};B.createCanvasTexture=function(a){a=new e.CanvasTexture(a);a.minFilter=e.LinearFilter;a.magFilter=e.LinearFilter;a.generateMipmaps=!1;return a};B.createCanvas=
function(a){var b=document.createElement("canvas"),c=b.getContext("2d");b.width=32*a;b.height=32*a;c.scale(a,a);c.shadowBlur=5;c.shadowColor="rgba(200,200,200,0.9)";return{canvas:b,context:c}};B.prototype.updateCanvasArcByProgress=function(a){var b=this.context,c=this.canvasWidth,d=this.canvasHeight,h=this.material,n=this.dpr,e=a*Math.PI*2,v=this.color.getStyle(),m=.5*c/n;n=.5*d/n;b.clearRect(0,0,c,d);b.beginPath();0===a?(b.arc(m,n,c/16,0,2*Math.PI),b.fillStyle=v,b.fill()):(b.arc(m,n,c/4-3,-Math.PI/
2,-Math.PI/2+e),b.strokeStyle=v,b.lineWidth=3,b.stroke());b.closePath();h.map.needsUpdate=!0};B.prototype.ripple=function(){var a=this,b=this.context,c=this.canvasWidth,d=this.canvasHeight,h=this.material,n=this.rippleDuration,e=performance.now(),v=this.color,m=this.dpr,g=.5*c/m,k=.5*d/m,f=function(){var E=window.requestAnimationFrame(f),l=(performance.now()-e)/n,p=0<1-l?1-l:0,q=l*c*.5/m;b.clearRect(0,0,c,d);b.beginPath();b.arc(g,k,q,0,2*Math.PI);b.fillStyle="rgba("+255*v.r+", "+255*v.g+", "+255*
v.b+", "+p+")";b.fill();b.closePath();1<=l&&(window.cancelAnimationFrame(E),a.updateCanvasArcByProgress(0),a.dispatchEvent({type:"reticle-ripple-end"}));h.map.needsUpdate=!0};this.dispatchEvent({type:"reticle-ripple-start"});f()};B.prototype.show=function(){this.visible=!0};B.prototype.hide=function(){this.visible=!1};B.prototype.start=function(a){this.autoSelect&&(this.dispatchEvent({type:"reticle-start"}),this.startTimestamp=performance.now(),this.callback=a,this.update())};B.prototype.end=function(){this.startTimestamp&&
(window.cancelAnimationFrame(this.timerId),this.updateCanvasArcByProgress(0),this.startTimestamp=this.timerId=this.callback=null,this.dispatchEvent({type:"reticle-end"}))};B.prototype.update=function(){this.timerId=window.requestAnimationFrame(this.update.bind(this));var a=(performance.now()-this.startTimestamp)/this.dwellTime;this.updateCanvasArcByProgress(a);this.dispatchEvent({type:"reticle-update",progress:a});1<=a&&(window.cancelAnimationFrame(this.timerId),this.callback&&this.callback(),this.end(),
this.ripple())};var t=function(a,b){return b={exports:{}},a(b,b.exports),b.exports}(function(a,b){b=function(){this._tweens={};this._tweensAddedDuringUpdate={}};b.prototype={getAll:function(){return Object.keys(this._tweens).map(function(a){return this._tweens[a]}.bind(this))},removeAll:function(){this._tweens={}},add:function(a){this._tweens[a.getId()]=a;this._tweensAddedDuringUpdate[a.getId()]=a},remove:function(a){delete this._tweens[a.getId()];delete this._tweensAddedDuringUpdate[a.getId()]},
update:function(a,b){var d=Object.keys(this._tweens);if(0===d.length)return!1;for(a=void 0!==a?a:c.now();0<d.length;){this._tweensAddedDuringUpdate={};for(var h=0;h<d.length;h++){var e=this._tweens[d[h]];e&&!1===e.update(a)&&(e._isPlaying=!1,b||delete this._tweens[d[h]])}d=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var c=new b;c.Group=b;c._nextId=0;c.nextId=function(){return c._nextId++};c.now="undefined"===typeof self&&"undefined"!==typeof process&&process.hrtime?function(){var a=process.hrtime();
return 1E3*a[0]+a[1]/1E6}:"undefined"!==typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()};c.Tween=function(a,b){this._object=a;this._valuesStart={};this._valuesEnd={};this._valuesStartRepeat={};this._duration=1E3;this._repeat=0;this._repeatDelayTime=void 0;this._reversed=this._isPlaying=this._yoyo=!1;this._delayTime=0;this._startTime=null;this._easingFunction=c.Easing.Linear.None;
this._interpolationFunction=c.Interpolation.Linear;this._chainedTweens=[];this._onStartCallback=null;this._onStartCallbackFired=!1;this._onStopCallback=this._onCompleteCallback=this._onRepeatCallback=this._onUpdateCallback=null;this._group=b||c;this._id=c.nextId()};c.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(a,b){this._valuesEnd=a;void 0!==b&&(this._duration=b);return this},duration:function(a){this._duration=a;return this},start:function(a){this._group.add(this);
this._isPlaying=!0;this._onStartCallbackFired=!1;this._startTime=void 0!==a?"string"===typeof a?c.now()+parseFloat(a):a:c.now();this._startTime+=this._delayTime;for(var b in this._valuesEnd){if(this._valuesEnd[b]instanceof Array){if(0===this._valuesEnd[b].length)continue;this._valuesEnd[b]=[this._object[b]].concat(this._valuesEnd[b])}void 0!==this._object[b]&&(this._valuesStart[b]=this._object[b],!1===this._valuesStart[b]instanceof Array&&(this._valuesStart[b]*=1),this._valuesStartRepeat[b]=this._valuesStart[b]||
0)}return this},stop:function(){if(!this._isPlaying)return this;this._group.remove(this);this._isPlaying=!1;null!==this._onStopCallback&&this._onStopCallback(this._object);this.stopChainedTweens();return this},end:function(){this.update(Infinity);return this},stopChainedTweens:function(){for(var a=0,b=this._chainedTweens.length;a<b;a++)this._chainedTweens[a].stop()},group:function(a){this._group=a;return this},delay:function(a){this._delayTime=a;return this},repeat:function(a){this._repeat=a;return this},
repeatDelay:function(a){this._repeatDelayTime=a;return this},yoyo:function(a){this._yoyo=a;return this},easing:function(a){this._easingFunction=a;return this},interpolation:function(a){this._interpolationFunction=a;return this},chain:function(){this._chainedTweens=arguments;return this},onStart:function(a){this._onStartCallback=a;return this},onUpdate:function(a){this._onUpdateCallback=a;return this},onRepeat:function(a){this._onRepeatCallback=a;return this},onComplete:function(a){this._onCompleteCallback=
a;return this},onStop:function(a){this._onStopCallback=a;return this},update:function(a){var b;if(a<this._startTime)return!0;!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0);var d=(a-this._startTime)/this._duration;d=0===this._duration||1<d?1:d;var c=this._easingFunction(d);for(b in this._valuesEnd)if(void 0!==this._valuesStart[b]){var e=this._valuesStart[b]||0,m=this._valuesEnd[b];m instanceof Array?this._object[b]=
this._interpolationFunction(m,c):("string"===typeof m&&(m="+"===m.charAt(0)||"-"===m.charAt(0)?e+parseFloat(m):parseFloat(m)),"number"===typeof m&&(this._object[b]=e+(m-e)*c))}null!==this._onUpdateCallback&&this._onUpdateCallback(this._object,d);if(1===d)if(0<this._repeat){isFinite(this._repeat)&&this._repeat--;for(b in this._valuesStartRepeat)"string"===typeof this._valuesEnd[b]&&(this._valuesStartRepeat[b]+=parseFloat(this._valuesEnd[b])),this._yoyo&&(d=this._valuesStartRepeat[b],this._valuesStartRepeat[b]=
this._valuesEnd[b],this._valuesEnd[b]=d),this._valuesStart[b]=this._valuesStartRepeat[b];this._yoyo&&(this._reversed=!this._reversed);this._startTime=void 0!==this._repeatDelayTime?a+this._repeatDelayTime:a+this._delayTime;null!==this._onRepeatCallback&&this._onRepeatCallback(this._object)}else{null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);a=0;for(b=this._chainedTweens.length;a<b;a++)this._chainedTweens[a].start(this._startTime+this._duration);return!1}return!0}};c.Easing=
{Linear:{None:function(a){return a}},Quadratic:{In:function(a){return a*a},Out:function(a){return a*(2-a)},InOut:function(a){return 1>(a*=2)?.5*a*a:-.5*(--a*(a-2)-1)}},Cubic:{In:function(a){return a*a*a},Out:function(a){return--a*a*a+1},InOut:function(a){return 1>(a*=2)?.5*a*a*a:.5*((a-=2)*a*a+2)}},Quartic:{In:function(a){return a*a*a*a},Out:function(a){return 1- --a*a*a*a},InOut:function(a){return 1>(a*=2)?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)}},Quintic:{In:function(a){return a*a*a*a*a},Out:function(a){return--a*
a*a*a*a+1},InOut:function(a){return 1>(a*=2)?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)}},Sinusoidal:{In:function(a){return 1-Math.cos(a*Math.PI/2)},Out:function(a){return Math.sin(a*Math.PI/2)},InOut:function(a){return.5*(1-Math.cos(Math.PI*a))}},Exponential:{In:function(a){return 0===a?0:Math.pow(1024,a-1)},Out:function(a){return 1===a?1:1-Math.pow(2,-10*a)},InOut:function(a){return 0===a?0:1===a?1:1>(a*=2)?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2)}},Circular:{In:function(a){return 1-Math.sqrt(1-
a*a)},Out:function(a){return Math.sqrt(1- --a*a)},InOut:function(a){return 1>(a*=2)?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)}},Elastic:{In:function(a){return 0===a?0:1===a?1:-Math.pow(2,10*(a-1))*Math.sin(5*(a-1.1)*Math.PI)},Out:function(a){return 0===a?0:1===a?1:Math.pow(2,-10*a)*Math.sin(5*(a-.1)*Math.PI)+1},InOut:function(a){if(0===a)return 0;if(1===a)return 1;a*=2;return 1>a?-.5*Math.pow(2,10*(a-1))*Math.sin(5*(a-1.1)*Math.PI):.5*Math.pow(2,-10*(a-1))*Math.sin(5*(a-1.1)*Math.PI)+
1}},Back:{In:function(a){return a*a*(2.70158*a-1.70158)},Out:function(a){return--a*a*(2.70158*a+1.70158)+1},InOut:function(a){return 1>(a*=2)?.5*a*a*(3.5949095*a-2.5949095):.5*((a-=2)*a*(3.5949095*a+2.5949095)+2)}},Bounce:{In:function(a){return 1-c.Easing.Bounce.Out(1-a)},Out:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},InOut:function(a){return.5>a?.5*c.Easing.Bounce.In(2*a):.5*c.Easing.Bounce.Out(2*
a-1)+.5}}};c.Interpolation={Linear:function(a,b){var d=a.length-1,h=d*b,e=Math.floor(h),m=c.Interpolation.Utils.Linear;return 0>b?m(a[0],a[1],h):1<b?m(a[d],a[d-1],d-h):m(a[e],a[e+1>d?d:e+1],h-e)},Bezier:function(a,b){for(var d=0,h=a.length-1,e=Math.pow,m=c.Interpolation.Utils.Bernstein,g=0;g<=h;g++)d+=e(1-b,h-g)*e(b,g)*a[g]*m(h,g);return d},CatmullRom:function(a,b){var d=a.length-1,h=d*b,e=Math.floor(h),m=c.Interpolation.Utils.CatmullRom;return a[0]===a[d]?(0>b&&(e=Math.floor(h=d*(1+b))),m(a[(e-1+
d)%d],a[e],a[(e+1)%d],a[(e+2)%d],h-e)):0>b?a[0]-(m(a[0],a[0],a[1],a[1],-h)-a[0]):1<b?a[d]-(m(a[d],a[d],a[d-1],a[d-1],h-d)-a[d]):m(a[e?e-1:0],a[e],a[d<e+1?d:e+1],a[d<e+2?d:e+2],h-e)},Utils:{Linear:function(a,b,c){return(b-a)*c+a},Bernstein:function(a,b){var d=c.Interpolation.Utils.Factorial;return d(a)/d(b)/d(a-b)},Factorial:function(){var a=[1];return function(b){var c=1;if(a[b])return a[b];for(var d=b;1<d;d--)c*=d;return a[b]=c}}(),CatmullRom:function(a,b,c,e,g){a=.5*(c-a);e=.5*(e-b);var d=g*g;return(2*
b-2*c+a+e)*g*d+(-3*b+3*c-2*a-e)*d+a*g+b}}};a.exports=c}),p=function(a,b,c){a=void 0===a?300:a;var d=e.Sprite.call(this)||this;b=b||y.Info;d.type="infospot";d.animated=void 0!==c?c:!0;d.isHovering=!1;d.frustumCulled=!1;d.element=null;d.toPanorama=null;d.cursorStyle=null;d.mode=q.NORMAL;d.scale.set(a,a,1);d.rotation.y=Math.PI;d.container=null;d.originalRaycast=d.raycast;d.HANDLER_FOCUS=null;d.material.side=e.DoubleSide;d.material.depthTest=!1;d.material.transparent=!0;d.material.opacity=0;d.scaleUpAnimation=
new t.Tween;d.scaleDownAnimation=new t.Tween;c=function(b){if(this.material){var c=b.image.width/b.image.height,d=new e.Vector3;b.image.width=b.image.naturalWidth||64;b.image.height=b.image.naturalHeight||64;this.scale.set(c*a,a,1);d.copy(this.scale);this.scaleUpAnimation=(new t.Tween(this.scale)).to({x:1.3*d.x,y:1.3*d.y},500).easing(t.Easing.Elastic.Out);this.scaleDownAnimation=(new t.Tween(this.scale)).to({x:d.x,y:d.y},500).easing(t.Easing.Elastic.Out);this.material.map=b;this.material.needsUpdate=
!0}}.bind(d);d.showAnimation=(new t.Tween(d.material)).to({opacity:1},500).onStart(d.enableRaycast.bind(d,!0)).easing(t.Easing.Quartic.Out);d.hideAnimation=(new t.Tween(d.material)).to({opacity:0},500).onStart(d.enableRaycast.bind(d,!1)).easing(t.Easing.Quartic.Out);d.addEventListener("click",d.onClick);d.addEventListener("hover",d.onHover);d.addEventListener("hoverenter",d.onHoverStart);d.addEventListener("hoverleave",d.onHoverEnd);d.addEventListener("panolens-dual-eye-effect",d.onDualEyeEffect);
d.addEventListener("panolens-container",d.setContainer.bind(d));d.addEventListener("dismiss",d.onDismiss);d.addEventListener("panolens-infospot-focus",d.setFocusMethod);Q.load(b,c);return d};$jscomp.inherits(p,e.Sprite);p.prototype.setContainer=function(a){if(a instanceof HTMLElement)var b=a;else a&&a.container&&(b=a.container);b&&this.element&&b.appendChild(this.element);this.container=b};p.prototype.getContainer=function(){return this.container};p.prototype.onClick=function(a){this.element&&this.getContainer()&&
(this.onHoverStart(a),this.lockHoverElement())};p.prototype.onDismiss=function(){this.element&&(this.unlockHoverElement(),this.onHoverEnd())};p.prototype.onHover=function(){};p.prototype.onHoverStart=function(a){if(this.getContainer()){var b=this.cursorStyle||(this.mode===q.NORMAL?"pointer":"default"),c=this.scaleDownAnimation,d=this.scaleUpAnimation,h=this.element;this.isHovering=!0;this.container.style.cursor=b;this.animated&&(c.stop(),d.start());h&&0<=a.mouseEvent.clientX&&0<=a.mouseEvent.clientY&&
(a=h.left,b=h.right,c=h.style,this.mode===q.CARDBOARD||this.mode===q.STEREO?(c.display="none",a.style.display="block",b.style.display="block",h._width=a.clientWidth,h._height=a.clientHeight):(c.display="block",a&&(a.style.display="none"),b&&(b.style.display="none"),h._width=h.clientWidth,h._height=h.clientHeight))}};p.prototype.onHoverEnd=function(){if(this.getContainer()){var a=this.scaleDownAnimation,b=this.scaleUpAnimation,c=this.element;this.isHovering=!1;this.container.style.cursor="default";
this.animated&&(b.stop(),a.start());c&&!this.element.locked&&(a=c.left,b=c.right,c.style.display="none",a&&(a.style.display="none"),b&&(b.style.display="none"),this.unlockHoverElement())}};p.prototype.onDualEyeEffect=function(a){if(this.getContainer()){this.mode=a.mode;a=this.element;var b=this.container.clientWidth/2;var c=this.container.clientHeight/2;a&&(a.left||a.right||(a.left=a.cloneNode(!0),a.right=a.cloneNode(!0)),this.mode===q.CARDBOARD||this.mode===q.STEREO?(a.left.style.display=a.style.display,
a.right.style.display=a.style.display,a.style.display="none"):(a.style.display=a.left.style.display,a.left.style.display="none",a.right.style.display="none"),this.translateElement(b,c),this.container.appendChild(a.left),this.container.appendChild(a.right))}};p.prototype.translateElement=function(a,b){if(this.element._width&&this.element._height&&this.getContainer()){var c=this.container;var d=this.element;var h=d._width/2;var e=d._height/2;var g=void 0!==d.verticalDelta?d.verticalDelta:40;var v=a-
h;var m=b-e-g;this.mode!==q.CARDBOARD&&this.mode!==q.STEREO||!d.left||!d.right||a===c.clientWidth/2&&b===c.clientHeight/2?this.setElementStyle("transform",d,"translate("+v+"px, "+m+"px)"):(v=c.clientWidth/4-h+(a-c.clientWidth/2),m=c.clientHeight/2-e-g+(b-c.clientHeight/2),this.setElementStyle("transform",d.left,"translate("+v+"px, "+m+"px)"),v+=c.clientWidth/2,this.setElementStyle("transform",d.right,"translate("+v+"px, "+m+"px)"))}};p.prototype.setElementStyle=function(a,b,c){b=b.style;"transform"===
a&&(b.webkitTransform=b.msTransform=b.transform=c)};p.prototype.setText=function(a){this.element&&(this.element.textContent=a)};p.prototype.setCursorHoverStyle=function(a){this.cursorStyle=a};p.prototype.addHoverText=function(a,b){b=void 0===b?40:b;this.element||(this.element=document.createElement("div"),this.element.style.display="none",this.element.style.color="#fff",this.element.style.top=0,this.element.style.maxWidth="50%",this.element.style.maxHeight="50%",this.element.style.textShadow="0 0 3px #000000",
this.element.style.fontFamily='"Trebuchet MS", Helvetica, sans-serif',this.element.style.position="absolute",this.element.classList.add("panolens-infospot"),this.element.verticalDelta=b);this.setText(a)};p.prototype.addHoverElement=function(a,b){b=void 0===b?40:b;this.element||(this.element=a.cloneNode(!0),this.element.style.display="none",this.element.style.top=0,this.element.style.position="absolute",this.element.classList.add("panolens-infospot"),this.element.verticalDelta=b)};p.prototype.removeHoverElement=
function(){this.element&&(this.element.left&&(this.container.removeChild(this.element.left),this.element.left=null),this.element.right&&(this.container.removeChild(this.element.right),this.element.right=null),this.container.removeChild(this.element),this.element=null)};p.prototype.lockHoverElement=function(){this.element&&(this.element.locked=!0)};p.prototype.unlockHoverElement=function(){this.element&&(this.element.locked=!1)};p.prototype.enableRaycast=function(a){this.raycast=void 0===a||a?this.originalRaycast:
function(){}};p.prototype.show=function(a){a=void 0===a?0:a;var b=this.hideAnimation,c=this.showAnimation,d=this.material;this.animated?(b.stop(),c.delay(a).start()):(this.enableRaycast(!0),d.opacity=1)};p.prototype.hide=function(a){a=void 0===a?0:a;var b=this.animated,c=this.hideAnimation,d=this.showAnimation,h=this.material,e=this.element;e&&(e.style.display="none");b?(d.stop(),c.delay(a).start()):(this.enableRaycast(!1),h.opacity=0)};p.prototype.setFocusMethod=function(a){a&&(this.HANDLER_FOCUS=
a.method)};p.prototype.focus=function(a,b){this.HANDLER_FOCUS&&(this.HANDLER_FOCUS(this.position,a,b),this.onDismiss())};p.prototype.dispose=function(){var a=this.geometry,b=this.material,c=b.map;this.removeHoverElement();this.parent&&this.parent.remove(this);c&&(c.dispose(),b.map=null);a&&(a.dispose(),this.geometry=null);b&&(b.dispose(),this.material=null)};var x=function(a){var b=e.EventDispatcher.call(this)||this;a||console.warn("PANOLENS.Widget: No container specified");b.DEFAULT_TRANSITION="all 0.27s ease";
b.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch);b.PREVENT_EVENT_HANDLER=function(a){a.preventDefault();a.stopPropagation()};b.container=a;b.barElement=null;b.fullscreenElement=null;b.videoElement=null;b.settingElement=null;b.mainMenu=null;b.activeMainItem=null;b.activeSubMenu=null;b.mask=null;return b};$jscomp.inherits(x,e.EventDispatcher);x.prototype.addControlBar=function(){if(this.container){var a=this,b,c;var d=document.createElement("div");
d.style.width="100%";d.style.height="44px";d.style.float="left";d.style.transform=d.style.webkitTransform=d.style.msTransform="translateY(-100%)";d.style.background="-webkit-linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))";d.style.background="-moz-linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))";d.style.background="-o-linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))";d.style.background="-ms-linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))";d.style.background="linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))";
d.style.transition=this.DEFAULT_TRANSITION;d.style.pointerEvents="none";d.isHidden=!1;d.toggle=function(){d.isHidden=!d.isHidden;b=d.isHidden?"translateY(0)":"translateY(-100%)";c=d.isHidden?0:1;d.style.transform=d.style.webkitTransform=d.style.msTransform=b;d.style.opacity=c};var h=this.createDefaultMenu();this.mainMenu=this.createMainMenu(h);d.appendChild(this.mainMenu);this.mask=h=this.createMask();this.container.appendChild(h);d.dispose=function(){a.fullscreenElement&&(d.removeChild(a.fullscreenElement),
a.fullscreenElement.dispose(),a.fullscreenElement=null);a.settingElement&&(d.removeChild(a.settingElement),a.settingElement.dispose(),a.settingElement=null);a.videoElement&&(d.removeChild(a.videoElement),a.videoElement.dispose(),a.videoElement=null)};this.container.appendChild(d);this.mask.addEventListener("mousemove",this.PREVENT_EVENT_HANDLER,!0);this.mask.addEventListener("mouseup",this.PREVENT_EVENT_HANDLER,!0);this.mask.addEventListener("mousedown",this.PREVENT_EVENT_HANDLER,!0);this.mask.addEventListener(a.TOUCH_ENABLED?
"touchend":"click",function(b){b.preventDefault();b.stopPropagation();a.mask.hide();a.settingElement.deactivate()},!1);this.addEventListener("control-bar-toggle",d.toggle);this.barElement=d}else console.warn("Widget container not set")};x.prototype.createDefaultMenu=function(){var a=this;var b=function(b,d){return function(){a.dispatchEvent({type:"panolens-viewer-handler",method:b,data:d})}};return[{title:"Control",subMenu:[{title:this.TOUCH_ENABLED?"Touch":"Mouse",handler:b("enableControl",M.ORBIT)},
{title:"Sensor",handler:b("enableControl",M.DEVICEORIENTATION)}]},{title:"Mode",subMenu:[{title:"Normal",handler:b("disableEffect")},{title:"Cardboard",handler:b("enableEffect",q.CARDBOARD)},{title:"Stereoscopic",handler:b("enableEffect",q.STEREO)}]}]};x.prototype.addControlButton=function(a){switch(a){case "fullscreen":this.fullscreenElement=a=this.createFullscreenButton();break;case "setting":this.settingElement=a=this.createSettingButton();break;case "video":this.videoElement=a=this.createVideoControl();
break;default:return}a&&this.barElement.appendChild(a)};x.prototype.createMask=function(){var a=document.createElement("div");a.style.position="absolute";a.style.top=0;a.style.left=0;a.style.width="100%";a.style.height="100%";a.style.background="transparent";a.style.display="none";a.show=function(){this.style.display="block"};a.hide=function(){this.style.display="none"};return a};x.prototype.createSettingButton=function(){var a=this;var b=this.createCustomItem({style:{backgroundImage:'url("'+y.Setting+
'")',webkitTransition:this.DEFAULT_TRANSITION,transition:this.DEFAULT_TRANSITION},onTap:function(b){b.preventDefault();b.stopPropagation();a.mainMenu.toggle();this.activated?this.deactivate():this.activate()}});b.activate=function(){this.style.transform="rotate3d(0,0,1,90deg)";this.activated=!0;a.mask.show()};b.deactivate=function(){this.style.transform="rotate3d(0,0,0,0)";this.activated=!1;a.mask.hide();a.mainMenu&&a.mainMenu.visible&&a.mainMenu.hide();a.activeSubMenu&&a.activeSubMenu.visible&&a.activeSubMenu.hide();
a.mainMenu&&a.mainMenu._width&&(a.mainMenu.changeSize(a.mainMenu._width),a.mainMenu.unslideAll())};b.activated=!1;return b};x.prototype.createFullscreenButton=function(){function a(){d&&(c=!c,e.style.backgroundImage=c?'url("'+y.FullscreenLeave+'")':'url("'+y.FullscreenEnter+'")');b.dispatchEvent({type:"panolens-viewer-handler",method:"onWindowResize"});d=!0}var b=this,c=!1,d=!0,h=this.container;if(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled){document.addEventListener("fullscreenchange",
a,!1);document.addEventListener("webkitfullscreenchange",a,!1);document.addEventListener("mozfullscreenchange",a,!1);document.addEventListener("MSFullscreenChange",a,!1);var e=this.createCustomItem({style:{backgroundImage:'url("'+y.FullscreenEnter+'")'},onTap:function(a){a.preventDefault();a.stopPropagation();d=!1;c?(document.exitFullscreen&&document.exitFullscreen(),document.msExitFullscreen&&document.msExitFullscreen(),document.mozCancelFullScreen&&document.mozCancelFullScreen(),document.webkitExitFullscreen&&
document.webkitExitFullscreen(),c=!1):(h.requestFullscreen&&h.requestFullscreen(),h.msRequestFullscreen&&h.msRequestFullscreen(),h.mozRequestFullScreen&&h.mozRequestFullScreen(),h.webkitRequestFullscreen&&h.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),c=!0);this.style.backgroundImage=c?'url("'+y.FullscreenLeave+'")':'url("'+y.FullscreenEnter+'")'}});if(!document.querySelector("panolens-style-addon")){var g=document.createElement("style");g.id="panolens-style-addon";g.innerHTML=":-webkit-full-screen { width: 100% !important; height: 100% !important }";
document.body.appendChild(g)}return e}};x.prototype.createVideoControl=function(){var a=document.createElement("span");a.style.display="none";a.show=function(){a.style.display=""};a.hide=function(){a.style.display="none";a.controlButton.paused=!0;a.controlButton.update()};a.controlButton=this.createVideoControlButton();a.seekBar=this.createVideoControlSeekbar();a.appendChild(a.controlButton);a.appendChild(a.seekBar);a.dispose=function(){a.removeChild(a.controlButton);a.removeChild(a.seekBar);a.controlButton.dispose();
a.controlButton=null;a.seekBar.dispose();a.seekBar=null};this.addEventListener("video-control-show",a.show);this.addEventListener("video-control-hide",a.hide);return a};x.prototype.createVideoControlButton=function(){var a=this,b=this.createCustomItem({style:{float:"left",backgroundImage:'url("'+y.VideoPlay+'")'},onTap:function(c){c.preventDefault();c.stopPropagation();a.dispatchEvent({type:"panolens-viewer-handler",method:"toggleVideoPlay",data:!this.paused});this.paused=!this.paused;b.update()}});
b.paused=!0;b.update=function(a){this.paused=void 0!==a?a:this.paused;this.style.backgroundImage='url("'+(this.paused?y.VideoPlay:y.VideoPause)+'")'};return b};x.prototype.createVideoControlSeekbar=function(){function a(a){a.stopPropagation();e=!0;g=a.clientX||a.changedTouches&&a.changedTouches[0].clientX;k=parseInt(l.style.width)/100;h.container.addEventListener("mousemove",b,{passive:!0});h.container.addEventListener("mouseup",c,{passive:!0});h.container.addEventListener("touchmove",b,{passive:!0});
h.container.addEventListener("touchend",c,{passive:!0})}function b(a){e&&(m=((a.clientX||a.changedTouches&&a.changedTouches[0].clientX)-g)/f.clientWidth,m=k+m,m=1<m?1:0>m?0:m,f.setProgress(m),h.dispatchEvent({type:"panolens-viewer-handler",method:"setVideoCurrentTime",data:m}))}function c(a){a.stopPropagation();e=!1;d()}function d(){h.container.removeEventListener("mousemove",b,!1);h.container.removeEventListener("mouseup",c,!1);h.container.removeEventListener("touchmove",b,!1);h.container.removeEventListener("touchend",
c,!1)}var h=this,e=!1,g,k,m;var l=document.createElement("div");l.style.width="0%";l.style.height="100%";l.style.backgroundColor="#fff";var p=document.createElement("div");p.style.float="right";p.style.width="14px";p.style.height="14px";p.style.transform="translate(7px, -5px)";p.style.borderRadius="50%";p.style.backgroundColor="#ddd";p.addEventListener("mousedown",a,{passive:!0});p.addEventListener("touchstart",a,{passive:!0});l.appendChild(p);var f=this.createCustomItem({style:{float:"left",width:"30%",
height:"4px",marginTop:"20px",backgroundColor:"rgba(188,188,188,0.8)"},onTap:function(a){a.preventDefault();a.stopPropagation();if(a.target!==p){var b=a.changedTouches&&0<a.changedTouches.length?(a.changedTouches[0].pageX-a.target.getBoundingClientRect().left)/this.clientWidth:a.offsetX/this.clientWidth;h.dispatchEvent({type:"panolens-viewer-handler",method:"setVideoCurrentTime",data:b});f.setProgress(a.offsetX/this.clientWidth)}},onDispose:function(){d();p=l=null}});f.appendChild(l);f.setProgress=
function(a){l.style.width=100*a+"%"};this.addEventListener("video-update",function(a){f.setProgress(a.percentage)});f.progressElement=l;f.progressElementControl=p;return f};x.prototype.createMenuItem=function(a){var b=this,c=document.createElement("a");c.textContent=a;c.style.display="block";c.style.padding="10px";c.style.textDecoration="none";c.style.cursor="pointer";c.style.pointerEvents="auto";c.style.transition=this.DEFAULT_TRANSITION;c.slide=function(a){this.style.transform="translateX("+(a?
"":"-")+"100%)"};c.unslide=function(){this.style.transform="translateX(0)"};c.setIcon=function(a){this.icon&&(this.icon.style.backgroundImage="url("+a+")")};c.setSelectionTitle=function(a){this.selection&&(this.selection.textContent=a)};c.addSelection=function(a){var b=document.createElement("span");b.style.fontSize="13px";b.style.fontWeight="300";b.style.float="right";this.selection=b;this.setSelectionTitle(a);this.appendChild(b);return this};c.addIcon=function(a,b,c){a=void 0===a?y.ChevronRight:
a;b=void 0===b?!1:b;c=void 0===c?!1:c;var d=document.createElement("span");d.style.float=b?"left":"right";d.style.width="17px";d.style.height="17px";d.style["margin"+(b?"Right":"Left")]="12px";d.style.backgroundSize="cover";c&&(d.style.transform="rotateZ(180deg)");this.icon=d;this.setIcon(a);this.appendChild(d);return this};c.addSubMenu=function(a,c){this.subMenu=b.createSubMenu(a,c);return this};c.addEventListener("mouseenter",function(){this.style.backgroundColor="#e0e0e0"},!1);c.addEventListener("mouseleave",
function(){this.style.backgroundColor="#fafafa"},!1);return c};x.prototype.createMenuItemHeader=function(a){a=this.createMenuItem(a);a.style.borderBottom="1px solid #333";a.style.paddingBottom="15px";return a};x.prototype.createMainMenu=function(a){function b(a){a.preventDefault();a.stopPropagation();var b=c.mainMenu,d=this.subMenu;b.hide();b.slideAll();b.parentElement.appendChild(d);c.activeMainItem=this;c.activeSubMenu=d;window.requestAnimationFrame(function(){b.changeSize(d.clientWidth);d.show();
d.unslideAll()})}var c=this,d=this.createMenu();d._width=200;d.changeSize(d._width);for(var e=0;e<a.length;e++){var n=d.addItem(a[e].title);n.style.paddingLeft="20px";n.addIcon().addEventListener(c.TOUCH_ENABLED?"touchend":"click",b,!1);a[e].subMenu&&0<a[e].subMenu.length&&n.addSelection(a[e].subMenu[0].title).addSubMenu(a[e].title,a[e].subMenu)}return d};x.prototype.createSubMenu=function(a,b){function c(a){a.preventDefault();a.stopPropagation();e=d.mainMenu;e.changeSize(e._width);e.unslideAll();
e.show();n.slideAll(!0);n.hide();"header"!==this.type&&(n.setActiveItem(this),d.activeMainItem.setSelectionTitle(this.textContent),this.handler&&this.handler())}var d=this,e,n=this.createMenu();n.items=b;n.activeItem=null;n.addHeader(a).addIcon(void 0,!0,!0).addEventListener(d.TOUCH_ENABLED?"touchend":"click",c,!1);for(a=0;a<b.length;a++){var g=n.addItem(b[a].title);g.style.fontWeight=300;g.handler=b[a].handler;g.addIcon(" ",!0);g.addEventListener(d.TOUCH_ENABLED?"touchend":"click",c,!1);n.activeItem||
n.setActiveItem(g)}n.slideAll(!0);return n};x.prototype.createMenu=function(){var a=this,b=document.createElement("span"),c=b.style;c.padding="5px 0";c.position="fixed";c.bottom="100%";c.right="14px";c.backgroundColor="#fafafa";c.fontFamily="Helvetica Neue";c.fontSize="14px";c.visibility="hidden";c.opacity=0;c.boxShadow="0 0 12pt rgba(0,0,0,0.25)";c.borderRadius="2px";c.overflow="hidden";c.willChange="width, height, opacity";c.pointerEvents="auto";c.transition=this.DEFAULT_TRANSITION;b.visible=!1;
b.changeSize=function(a,b){a&&(this.style.width=a+"px");b&&(this.style.height=b+"px")};b.show=function(){this.style.opacity=1;this.style.visibility="visible";this.visible=!0};b.hide=function(){this.style.opacity=0;this.style.visibility="hidden";this.visible=!1};b.toggle=function(){this.visible?this.hide():this.show()};b.slideAll=function(a){for(var c=0;c<b.children.length;c++)b.children[c].slide&&b.children[c].slide(a)};b.unslideAll=function(){for(var a=0;a<b.children.length;a++)b.children[a].unslide&&
b.children[a].unslide()};b.addHeader=function(b){b=a.createMenuItemHeader(b);b.type="header";this.appendChild(b);return b};b.addItem=function(b){b=a.createMenuItem(b);b.type="item";this.appendChild(b);return b};b.setActiveItem=function(a){this.activeItem&&this.activeItem.setIcon(" ");a.setIcon(y.Check);this.activeItem=a};b.addEventListener("mousemove",this.PREVENT_EVENT_HANDLER,!0);b.addEventListener("mouseup",this.PREVENT_EVENT_HANDLER,!0);b.addEventListener("mousedown",this.PREVENT_EVENT_HANDLER,
!0);return b};x.prototype.createCustomItem=function(a){a=void 0===a?{}:a;var b=this,c=a.element||document.createElement("span"),d=a.onDispose;c.style.cursor="pointer";c.style.float="right";c.style.width="44px";c.style.height="100%";c.style.backgroundSize="60%";c.style.backgroundRepeat="no-repeat";c.style.backgroundPosition="center";c.style.webkitUserSelect=c.style.MozUserSelect=c.style.userSelect="none";c.style.position="relative";c.style.pointerEvents="auto";c.addEventListener(b.TOUCH_ENABLED?"touchstart":
"mouseenter",function(){c.style.filter=c.style.webkitFilter="drop-shadow(0 0 5px rgba(255,255,255,1))"},{passive:!0});c.addEventListener(b.TOUCH_ENABLED?"touchend":"mouseleave",function(){c.style.filter=c.style.webkitFilter=""},{passive:!0});this.mergeStyleOptions(c,a.style);a.onTap&&c.addEventListener(b.TOUCH_ENABLED?"touchend":"click",a.onTap,!1);c.dispose=function(){c.removeEventListener(b.TOUCH_ENABLED?"touchend":"click",a.onTap,!1);if(d)a.onDispose()};return c};x.prototype.mergeStyleOptions=
function(a,b){b=void 0===b?{}:b;for(var c in b)b.hasOwnProperty(c)&&(a.style[c]=b[c]);return a};x.prototype.dispose=function(){this.barElement&&(this.container.removeChild(this.barElement),this.barElement.dispose(),this.barElement=null)};var l=function(a,b){a=e.Mesh.call(this,a,b)||this;a.type="panorama";a.ImageQualityLow=1;a.ImageQualityFair=2;a.ImageQualityMedium=3;a.ImageQualityHigh=4;a.ImageQualitySuperHigh=5;a.animationDuration=1E3;a.defaultInfospotSize=350;a.container=void 0;a.loaded=!1;a.linkedSpots=
[];a.isInfospotVisible=!1;a.linkingImageURL=void 0;a.linkingImageScale=void 0;a.material.side=e.BackSide;a.material.opacity=0;a.scale.x*=-1;a.renderOrder=-1;a.active=!1;a.infospotAnimation=(new t.Tween(a)).to({},a.animationDuration/2);a.addEventListener("load",a.fadeIn.bind(a));a.addEventListener("panolens-container",a.setContainer.bind(a));a.addEventListener("click",a.onClick.bind(a));a.setupTransitions();return a};$jscomp.inherits(l,e.Mesh);l.prototype.add=function(a){var b;if(1<arguments.length){for(b=
0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a instanceof p){if(b=a,a.dispatchEvent){var c=this.container;c&&a.dispatchEvent({type:"panolens-container",container:c});a.dispatchEvent({type:"panolens-infospot-focus",method:function(a,b,c){this.dispatchEvent({type:"panolens-viewer-handler",method:"tweenControlCenter",data:[a,b,c]})}.bind(this)})}}else b=new e.Object3D,b.scale.x=-1,b.scalePlaceHolder=!0,b.add(a);e.Object3D.prototype.add.call(this,b)};l.prototype.load=function(){this.onLoad()};
l.prototype.onClick=function(a){a.intersects&&0===a.intersects.length&&this.traverse(function(a){a.dispatchEvent({type:"dismiss"})})};l.prototype.setContainer=function(a){if(a instanceof HTMLElement)var b=a;else a&&a.container&&(b=a.container);b&&(this.children.forEach(function(a){a instanceof p&&a.dispatchEvent&&a.dispatchEvent({type:"panolens-container",container:b})}),this.container=b)};l.prototype.onLoad=function(){this.loaded=!0;this.dispatchEvent({type:"load"})};l.prototype.onProgress=function(a){this.dispatchEvent({type:"progress",
progress:a})};l.prototype.onError=function(){this.dispatchEvent({type:"error"})};l.prototype.getZoomLevel=function(){return 800>=window.innerWidth?this.ImageQualityFair:800<window.innerWidth&&1280>=window.innerWidth?this.ImageQualityMedium:1280<window.innerWidth&&1920>=window.innerWidth?this.ImageQualityHigh:1920<window.innerWidth?this.ImageQualitySuperHigh:this.ImageQualityLow};l.prototype.updateTexture=function(a){this.material.map=a;this.material.needsUpdate=!0};l.prototype.toggleInfospotVisibility=
function(a,b){b=void 0!==b?b:0;var c=void 0!==a?a:this.isInfospotVisible?!1:!0;this.traverse(function(a){a instanceof p&&(c?a.show(b):a.hide(b))});this.isInfospotVisible=c;this.infospotAnimation.onComplete(function(){this.dispatchEvent({type:"infospot-animation-complete",visible:c})}.bind(this)).delay(b).start()};l.prototype.setLinkingImage=function(a,b){this.linkingImageURL=a;this.linkingImageScale=b};l.prototype.link=function(a,b,c,d){this.visible=!0;b?(c=void 0!==c?c:void 0!==a.linkingImageScale?
a.linkingImageScale:300,d=d?d:a.linkingImageURL?a.linkingImageURL:y.Arrow,d=new p(c,d),d.position.copy(b),d.toPanorama=a,d.addEventListener("click",function(){this.dispatchEvent({type:"panolens-viewer-handler",method:"setPanorama",data:a})}.bind(this)),this.linkedSpots.push(d),this.add(d),this.visible=!1):console.warn("Please specify infospot position for linking")};l.prototype.reset=function(){this.children.length=0};l.prototype.setupTransitions=function(){this.fadeInAnimation=(new t.Tween(this.material)).easing(t.Easing.Quartic.Out).onStart(function(){this.visible=
!0;this.dispatchEvent({type:"enter-fade-start"})}.bind(this));this.fadeOutAnimation=(new t.Tween(this.material)).easing(t.Easing.Quartic.Out).onComplete(function(){this.visible=!1;this.dispatchEvent({type:"leave-complete"})}.bind(this));this.enterTransition=(new t.Tween(this)).easing(t.Easing.Quartic.Out).onComplete(function(){this.dispatchEvent({type:"enter-complete"})}.bind(this)).start();this.leaveTransition=(new t.Tween(this)).easing(t.Easing.Quartic.Out)};l.prototype.onFadeAnimationUpdate=function(){var a=
this.material.opacity,b=this.material.uniforms;b&&b.opacity&&(b.opacity.value=a)};l.prototype.fadeIn=function(a){a=0<=a?a:this.animationDuration;this.fadeOutAnimation.stop();this.fadeInAnimation.to({opacity:1},a).onUpdate(this.onFadeAnimationUpdate.bind(this)).onComplete(function(){this.toggleInfospotVisibility(!0,a/2);this.dispatchEvent({type:"enter-fade-complete"})}.bind(this)).start()};l.prototype.fadeOut=function(a){a=0<=a?a:this.animationDuration;this.fadeInAnimation.stop();this.fadeOutAnimation.to({opacity:0},
a).onUpdate(this.onFadeAnimationUpdate.bind(this)).start()};l.prototype.onEnter=function(){var a=this.animationDuration;this.leaveTransition.stop();this.enterTransition.to({},a).onStart(function(){this.dispatchEvent({type:"enter-start"});this.loaded?this.fadeIn(a):this.load()}.bind(this)).start();this.dispatchEvent({type:"enter"});this.children.forEach(function(a){a.dispatchEvent({type:"panorama-enter"})});this.active=!0};l.prototype.onLeave=function(){var a=this.animationDuration;this.enterTransition.stop();
this.leaveTransition.to({},a).onStart(function(){this.dispatchEvent({type:"leave-start"});this.fadeOut(a);this.toggleInfospotVisibility(!1)}.bind(this)).start();this.dispatchEvent({type:"leave"});this.children.forEach(function(a){a.dispatchEvent({type:"panorama-leave"})});this.active=!1};l.prototype.dispose=function(){function a(b){for(var c=b.geometry,d=b.material,e=b.children.length-1;0<=e;e--)a(b.children[e]),b.remove(b.children[e]);b instanceof p&&b.dispose();c&&(c.dispose(),b.geometry=null);
d&&(d.dispose(),b.material=null)}this.infospotAnimation.stop();this.fadeInAnimation.stop();this.fadeOutAnimation.stop();this.enterTransition.stop();this.leaveTransition.stop();this.dispatchEvent({type:"panolens-viewer-handler",method:"onPanoramaDispose",data:this});a(this);this.parent&&this.parent.remove(this)};var z=function(a,b,c){b=b||new e.SphereBufferGeometry(5E3,60,40);c=c||new e.MeshBasicMaterial({opacity:0,transparent:!0});c=l.call(this,b,c)||this;c.src=a;c.radius=5E3;return c};$jscomp.inherits(z,
l);z.prototype.load=function(a){a=a||this.src;if(!a)console.warn("Image source undefined");else if("string"===typeof a)Q.load(a,this.onLoad.bind(this),this.onProgress.bind(this),this.onError.bind(this));else if(a instanceof HTMLImageElement)this.onLoad(new e.Texture(a))};z.prototype.onLoad=function(a){a.minFilter=a.magFilter=e.LinearFilter;a.needsUpdate=!0;this.updateTexture(a);window.requestAnimationFrame(l.prototype.onLoad.bind(this))};z.prototype.reset=function(){l.prototype.reset.call(this)};
z.prototype.dispose=function(){var a=this.material.map;e.Cache.remove(this.src);a&&a.dispose();l.prototype.dispose.call(this)};var aa=function(){var a=new e.BufferGeometry;var b=new e.MeshBasicMaterial({color:0,opacity:0,transparent:!0});b=l.call(this,a,b)||this;a.setAttribute("position",new e.BufferAttribute(new Float32Array,1));return b};$jscomp.inherits(aa,l);var G=function(a){a=void 0===a?[]:a;var b=Object.assign({},e.ShaderLib.cube);var c=new e.BoxBufferGeometry(1E4,1E4,1E4);b=new e.ShaderMaterial({fragmentShader:b.fragmentShader,
vertexShader:b.vertexShader,uniforms:b.uniforms,side:e.BackSide,transparent:!0});c=l.call(this,c,b)||this;c.images=a;c.edgeLength=1E4;c.material.uniforms.opacity.value=0;return c};$jscomp.inherits(G,l);G.prototype.load=function(){Z.load(this.images,this.onLoad.bind(this),this.onProgress.bind(this),this.onError.bind(this))};G.prototype.onLoad=function(a){this.material.uniforms.tCube.value=a;l.prototype.onLoad.call(this)};G.prototype.dispose=function(){var a=this.material.uniforms.tCube.value;this.images.forEach(function(a){e.Cache.remove(a)});
a instanceof e.CubeTexture&&a.dispose();l.prototype.dispose.call(this)};var ba=function(){var a=G.call(this)||this;for(var b=[],c=0;6>c;c++)b.push(y.WhiteTile);return a};$jscomp.inherits(ba,G);var w=function(a,b){b=void 0===b?{}:b;var c=new e.SphereBufferGeometry(5E3,60,40);var d=new e.MeshBasicMaterial({opacity:0,transparent:!0});c=l.call(this,c,d)||this;c.src=a;c.options={videoElement:document.createElement("video"),loop:!0,muted:!0,autoplay:!1,playsinline:!0,crossOrigin:"anonymous"};Object.assign(c.options,
b);c.videoElement=c.options.videoElement;c.videoProgress=0;c.radius=5E3;c.addEventListener("leave",c.pauseVideo.bind(c));c.addEventListener("enter-fade-start",c.resumeVideoProgress.bind(c));c.addEventListener("video-toggle",c.toggleVideo.bind(c));c.addEventListener("video-time",c.setVideoCurrentTime.bind(c));return c};$jscomp.inherits(w,l);w.prototype.isMobile=function(){var a=!1,b=window.navigator.userAgent||window.navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||
/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,
4)))a=!0;return a};w.prototype.load=function(){var a=this.options,b=a.muted,c=a.loop,d=a.autoplay,e=a.playsinline;a=a.crossOrigin;var n=this.videoElement,g=this.material,k=this.onProgress.bind(this),m=this.onLoad.bind(this);n.loop=c;n.autoplay=d;n.playsinline=e;n.crossOrigin=a;n.muted=b;e&&(n.setAttribute("playsinline",""),n.setAttribute("webkit-playsinline",""));e=function(){this.setVideoTexture(n);d&&this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!1});this.isMobile()&&
(n.pause(),d&&b?this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!1}):this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!0}));window.requestAnimationFrame(function(){g.map.needsUpdate=!0;k({loaded:1,total:1});m()})};2<n.readyState?e.call(this):(0===n.querySelectorAll("source").length&&(a=document.createElement("source"),a.src=this.src,n.appendChild(a)),n.load());n.addEventListener("loadeddata",e.bind(this));n.addEventListener("timeupdate",
function(){this.videoProgress=0<=n.duration?n.currentTime/n.duration:0;this.dispatchEvent({type:"panolens-viewer-handler",method:"onVideoUpdate",data:this.videoProgress})}.bind(this));n.addEventListener("ended",function(){c||(this.resetVideo(),this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!0}))}.bind(this),!1)};w.prototype.setVideoTexture=function(a){a&&(a=new e.VideoTexture(a),a.minFilter=e.LinearFilter,a.magFilter=e.LinearFilter,a.format=e.RGBFormat,this.updateTexture(a))};
w.prototype.reset=function(){this.videoElement=void 0;l.prototype.reset.call(this)};w.prototype.isVideoPaused=function(){return this.videoElement.paused};w.prototype.toggleVideo=function(){var a=this.videoElement;if(a)a[a.paused?"play":"pause"]()};w.prototype.setVideoCurrentTime=function(a){a=a.percentage;var b=this.videoElement;b&&!Number.isNaN(a)&&1!==a&&(b.currentTime=b.duration*a,this.dispatchEvent({type:"panolens-viewer-handler",method:"onVideoUpdate",data:a}))};w.prototype.playVideo=function(){var a=
this.videoElement,b=this.playVideo.bind(this),c=this.dispatchEvent.bind(this),d=function(){c({type:"play"})},e=function(a){window.requestAnimationFrame(b);c({type:"play-error",error:a})};a&&a.paused&&a.play().then(d).catch(e)};w.prototype.pauseVideo=function(){var a=this.videoElement;a&&!a.paused&&a.pause();this.dispatchEvent({type:"pause"})};w.prototype.resumeVideoProgress=function(){var a=this.videoElement;4<=a.readyState&&a.autoplay&&!this.isMobile()?(this.playVideo(),this.dispatchEvent({type:"panolens-viewer-handler",
method:"updateVideoPlayButton",data:!1})):(this.pauseVideo(),this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!0}));this.setVideoCurrentTime({percentage:this.videoProgress})};w.prototype.resetVideo=function(){this.videoElement&&this.setVideoCurrentTime({percentage:0})};w.prototype.isVideoMuted=function(){return this.videoElement.muted};w.prototype.muteVideo=function(){var a=this.videoElement;a&&!a.muted&&(a.muted=!0);this.dispatchEvent({type:"volumechange"})};
w.prototype.unmuteVideo=function(){var a=this.videoElement;a&&this.isVideoMuted()&&(a.muted=!1);this.dispatchEvent({type:"volumechange"})};w.prototype.getVideoElement=function(){return this.videoElement};w.prototype.dispose=function(){var a=this.material.map;this.pauseVideo();this.removeEventListener("leave",this.pauseVideo.bind(this));this.removeEventListener("enter-fade-start",this.resumeVideoProgress.bind(this));this.removeEventListener("video-toggle",this.toggleVideo.bind(this));this.removeEventListener("video-time",
this.setVideoCurrentTime.bind(this));a&&a.dispose();l.prototype.dispose.call(this)};Object.assign(I.prototype,{constructor:I,setProgress:function(a,b){if(this.onProgress)this.onProgress({loaded:a,total:b})},adaptTextureToZoom:function(){var a=this.widths[this._zoom],b=this.heights[this._zoom],c=this.maxW,d=this.maxH;this._wc=Math.ceil(a/c);this._hc=Math.ceil(b/d);for(var e=0;e<this._hc;e++)for(var g=0;g<this._wc;g++){var k=document.createElement("canvas");k.width=g<this._wc-1?c:a-c*g;k.height=e<this._hc-
1?d:b-d*e;this._canvas.push(k);this._ctx.push(k.getContext("2d"))}},composeFromTile:function(a,b,c){var d=this.maxW,e=this.maxH;a*=512;b*=512;var g=Math.floor(a/d),k=Math.floor(b/e);this._ctx[k*this._wc+g].drawImage(c,0,0,c.width,c.height,a-g*d,b-k*e,512,512);this.progress()},progress:function(){this._count++;this.setProgress(this._count,this._total);if(this._count===this._total&&(this.canvas=this._canvas,this.panoId=this._panoId,this.zoom=this._zoom,this.onPanoramaLoad))this.onPanoramaLoad(this._canvas[0])},
composePanorama:function(){this.setProgress(0,1);var a=this.levelsW[this._zoom],b=this.levelsH[this._zoom],c=this;this._count=0;this._total=a*b;for(var d=this._parameters.useWebGL,e=0;e<b;e++)for(var g={},k=0;k<a;g={$jscomp$loop$prop$url$1:g.$jscomp$loop$prop$url$1},k++)g.$jscomp$loop$prop$url$1="https://geo0.ggpht.com/cbk?cb_client=maps_sv.tactile&authuser=0&hl=en&output=tile&zoom="+this._zoom+"&x="+k+"&y="+e+"&panoid="+this._panoId+"&nbt&fover=2",function(a){return function(b,e){if(d)var h=Q.load(a.$jscomp$loop$prop$url$1,
null,function(){c.composeFromTile(b,e,h)});else{var f=new Image;f.addEventListener("load",function(){c.composeFromTile(b,e,this)});f.crossOrigin="";f.src=a.$jscomp$loop$prop$url$1}}}(g)(k,e)},load:function(a){this.loadPano(a)},loadPano:function(a){var b=this;this._panoClient.getPanoramaById(a,function(a,d){d===google.maps.StreetViewStatus.OK&&(b.result=a,b.copyright=a.copyright,b._panoId=a.location.pano,b.composePanorama())})},setZoom:function(a){this._zoom=a;this.adaptTextureToZoom()}});var F=function(a,
b){var c=z.call(this)||this;c.panoId=a;c.gsvLoader=null;c.loadRequested=!1;c.setupGoogleMapAPI(b);return c};$jscomp.inherits(F,z);F.prototype.load=function(a){this.loadRequested=!0;(a=a||this.panoId||{},this.gsvLoader)&&this.loadGSVLoader(a)};F.prototype.setupGoogleMapAPI=function(a){var b=document.createElement("script");b.src="https://maps.googleapis.com/maps/api/js?";b.src+=a?"key="+a:"";b.onreadystatechange=this.setGSVLoader.bind(this);b.onload=this.setGSVLoader.bind(this);document.querySelector("head").appendChild(b)};
F.prototype.setGSVLoader=function(){this.gsvLoader=new I;this.loadRequested&&this.load()};F.prototype.getGSVLoader=function(){return this.gsvLoader};F.prototype.loadGSVLoader=function(a){this.loadRequested=!1;this.gsvLoader.onProgress=this.onProgress.bind(this);this.gsvLoader.onPanoramaLoad=this.onLoad.bind(this);this.gsvLoader.setZoom(this.getZoomLevel());this.gsvLoader.load(a);this.gsvLoader.loaded=!0};F.prototype.onLoad=function(a){z.prototype.onLoad.call(this,new e.Texture(a))};F.prototype.reset=
function(){this.gsvLoader=void 0;z.prototype.reset.call(this)};var da={uniforms:{tDiffuse:{value:new e.Texture},resolution:{value:1},transform:{value:new e.Matrix4},zoom:{value:1},opacity:{value:1}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D tDiffuse;\nuniform float resolution;\nuniform mat4 transform;\nuniform float zoom;\nuniform float opacity;\nvarying vec2 vUv;\nconst float PI = 3.141592653589793;\nvoid main(){\nvec2 position = -1.0 +  2.0 * vUv;\nposition *= vec2( zoom * resolution, zoom * 0.5 );\nfloat x2y2 = position.x * position.x + position.y * position.y;\nvec3 sphere_pnt = vec3( 2. * position, x2y2 - 1. ) / ( x2y2 + 1. );\nsphere_pnt = vec3( transform * vec4( sphere_pnt, 1.0 ) );\nvec2 sampleUV = vec2(\n(atan(sphere_pnt.y, sphere_pnt.x) / PI + 1.0) * 0.5,\n(asin(sphere_pnt.z) / PI + 0.5)\n);\ngl_FragColor = texture2D( tDiffuse, sampleUV );\ngl_FragColor.a *= opacity;\n}"},
r=function(a,b,c,d){c=void 0===c?1E4:c;d=void 0===d?.5:d;a="image"===(void 0===a?"image":a)?z.call(this,b,r.createGeometry(c,d),r.createMaterial(c))||this:z.call(this)||this;a.size=c;a.ratio=d;a.EPS=1E-6;a.frameId=null;a.dragging=!1;a.userMouse=new e.Vector2;a.quatA=new e.Quaternion;a.quatB=new e.Quaternion;a.quatCur=new e.Quaternion;a.quatSlerp=new e.Quaternion;a.vectorX=new e.Vector3(1,0,0);a.vectorY=new e.Vector3(0,1,0);a.addEventListener("window-resize",a.onWindowResize);return a};$jscomp.inherits(r,
z);r.prototype.add=function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}a instanceof p&&(a.material.depthTest=!1);z.prototype.add.call(this,a)};r.createGeometry=function(a,b){return new e.PlaneBufferGeometry(a,a*b)};r.createMaterial=function(a){var b=Object.assign({},da),c=b.uniforms;c.zoom.value=a;c.opacity.value=0;return new e.ShaderMaterial({uniforms:c,vertexShader:b.vertexShader,fragmentShader:b.fragmentShader,side:e.BackSide,transparent:!0})};
r.prototype.registerMouseEvents=function(){this.container.addEventListener("mousedown",this.onMouseDown.bind(this),{passive:!0});this.container.addEventListener("mousemove",this.onMouseMove.bind(this),{passive:!0});this.container.addEventListener("mouseup",this.onMouseUp.bind(this),{passive:!0});this.container.addEventListener("touchstart",this.onMouseDown.bind(this),{passive:!0});this.container.addEventListener("touchmove",this.onMouseMove.bind(this),{passive:!0});this.container.addEventListener("touchend",
this.onMouseUp.bind(this),{passive:!0});this.container.addEventListener("mousewheel",this.onMouseWheel.bind(this),{passive:!1});this.container.addEventListener("DOMMouseScroll",this.onMouseWheel.bind(this),{passive:!1});this.container.addEventListener("contextmenu",this.onContextMenu.bind(this),{passive:!0})};r.prototype.unregisterMouseEvents=function(){this.container.removeEventListener("mousedown",this.onMouseDown.bind(this),!1);this.container.removeEventListener("mousemove",this.onMouseMove.bind(this),
!1);this.container.removeEventListener("mouseup",this.onMouseUp.bind(this),!1);this.container.removeEventListener("touchstart",this.onMouseDown.bind(this),!1);this.container.removeEventListener("touchmove",this.onMouseMove.bind(this),!1);this.container.removeEventListener("touchend",this.onMouseUp.bind(this),!1);this.container.removeEventListener("mousewheel",this.onMouseWheel.bind(this),!1);this.container.removeEventListener("DOMMouseScroll",this.onMouseWheel.bind(this),!1);this.container.removeEventListener("contextmenu",
this.onContextMenu.bind(this),!1)};r.prototype.onMouseDown=function(a){switch(a.touches&&a.touches.length||1){case 1:var b=0<=a.clientX?a.clientX:a.touches[0].clientX;a=0<=a.clientY?a.clientY:a.touches[0].clientY;this.dragging=!0;this.userMouse.set(b,a);break;case 2:b=a.touches[0].pageX-a.touches[1].pageX,a=a.touches[0].pageY-a.touches[1].pageY,this.userMouse.pinchDistance=Math.sqrt(b*b+a*a)}this.onUpdateCallback()};r.prototype.onMouseMove=function(a){switch(a.touches&&a.touches.length||1){case 1:var b=
0<=a.clientX?a.clientX:a.touches[0].clientX;a=0<=a.clientY?a.clientY:a.touches[0].clientY;var c=.4*e.Math.degToRad(b-this.userMouse.x),d=.4*e.Math.degToRad(a-this.userMouse.y);this.dragging&&(this.quatA.setFromAxisAngle(this.vectorY,c),this.quatB.setFromAxisAngle(this.vectorX,d),this.quatCur.multiply(this.quatA).multiply(this.quatB),this.userMouse.set(b,a));break;case 2:b=a.touches[0].pageX-a.touches[1].pageX,a=a.touches[0].pageY-a.touches[1].pageY,this.addZoomDelta(this.userMouse.pinchDistance-Math.sqrt(b*
b+a*a))}};r.prototype.onMouseUp=function(){this.dragging=!1};r.prototype.onMouseWheel=function(a){a.preventDefault();a.stopPropagation();var b=0;void 0!==a.wheelDelta?b=a.wheelDelta:void 0!==a.detail&&(b=-a.detail);this.addZoomDelta(b);this.onUpdateCallback()};r.prototype.addZoomDelta=function(a){var b=this.material.uniforms,c=.1*this.size,d=10*this.size;b.zoom.value+=a;b.zoom.value<=c?b.zoom.value=c:b.zoom.value>=d&&(b.zoom.value=d)};r.prototype.onUpdateCallback=function(){this.frameId=window.requestAnimationFrame(this.onUpdateCallback.bind(this));
this.quatSlerp.slerp(this.quatCur,.1);this.material&&this.material.uniforms.transform.value.makeRotationFromQuaternion(this.quatSlerp);!this.dragging&&1-this.quatSlerp.clone().dot(this.quatCur)<this.EPS&&window.cancelAnimationFrame(this.frameId)};r.prototype.reset=function(){this.quatCur.set(0,0,0,1);this.quatSlerp.set(0,0,0,1);this.onUpdateCallback()};r.prototype.onLoad=function(a){this.material.uniforms.resolution.value=this.container.clientWidth/this.container.clientHeight;this.registerMouseEvents();
this.onUpdateCallback();this.dispatchEvent({type:"panolens-viewer-handler",method:"disableControl"});z.prototype.onLoad.call(this,a)};r.prototype.onLeave=function(){this.unregisterMouseEvents();this.dispatchEvent({type:"panolens-viewer-handler",method:"enableControl",data:M.ORBIT});window.cancelAnimationFrame(this.frameId);z.prototype.onLeave.call(this)};r.prototype.onWindowResize=function(){this.material.uniforms.resolution.value=this.container.clientWidth/this.container.clientHeight};r.prototype.onContextMenu=
function(){this.dragging=!1};r.prototype.dispose=function(){this.unregisterMouseEvents();z.prototype.dispose.call(this)};var N=function(a,b,c){return r.call(this,a,b,c)||this};$jscomp.inherits(N,r);N.prototype.onLoad=function(a){this.updateTexture(a);r.prototype.onLoad.call(this,a)};N.prototype.updateTexture=function(a){a.minFilter=a.magFilter=e.LinearFilter;this.material.uniforms.tDiffuse.value=a};N.prototype.dispose=function(){var a=this.material.uniforms.tDiffuse;a&&a.value&&a.value.dispose();
r.prototype.dispose.call(this)};var H=function(a){var b=new e.SphereBufferGeometry(5E3,60,40);var c=new e.MeshBasicMaterial({visible:!1});b=l.call(this,b,c)||this;b.media=new D(a);b.radius=5E3;b.addEventListener("enter",b.start.bind(b));b.addEventListener("leave",b.stop.bind(b));b.addEventListener("panolens-container",b.onPanolensContainer.bind(b));b.addEventListener("panolens-scene",b.onPanolensScene.bind(b));return b};$jscomp.inherits(H,l);H.prototype.onPanolensContainer=function(a){this.media.setContainer(a.container)};
H.prototype.onPanolensScene=function(a){this.media.setScene(a.scene)};H.prototype.start=function(){return this.media.start()};H.prototype.stop=function(){this.media.stop()};T.prototype=Object.assign(Object.create(e.EventDispatcher.prototype),{constructor:T});V.prototype=Object.assign(Object.create(e.EventDispatcher.prototype),{constructor:V});var ea=function(a){var b=new e.OrthographicCamera(-1,1,1,-1,0,1),c=new e.Scene,d=new e.StereoCamera;d.aspect=.5;var h=new e.WebGLRenderTarget(512,512,{minFilter:e.LinearFilter,
magFilter:e.NearestFilter,format:e.RGBAFormat});h.scissorTest=!0;h.texture.generateMipmaps=!1;var g=new e.Vector2(.441,.156),k=(new e.PlaneBufferGeometry(1,1,10,20)).removeAttribute("normal").toNonIndexed(),l=k.attributes.position.array,m=k.attributes.uv.array;k.attributes.position.count*=2;k.attributes.uv.count*=2;var p=new Float32Array(2*l.length);p.set(l);p.set(l,l.length);var q=new Float32Array(2*m.length);q.set(m);q.set(m,m.length);m=new e.Vector2;l=l.length/3;for(var f=0,t=p.length/3;f<t;f++){m.x=
p[3*f];m.y=p[3*f+1];var r=m.dot(m);r=1.5+(g.x+g.y*r)*r;var u=f<l?0:1;p[3*f]=m.x/r*1.5-.5+u;p[3*f+1]=m.y/r*3;q[2*f]=.5*(q[2*f]+u)}k.attributes.position.array=p;k.attributes.uv.array=q;g=new e.MeshBasicMaterial({map:h.texture});k=new e.Mesh(k,g);c.add(k);this.setSize=function(b,c){a.setSize(b,c);var d=a.getPixelRatio();h.setSize(b*d,c*d)};this.render=function(e,f){e.updateMatrixWorld();null===f.parent&&f.updateMatrixWorld();d.update(f);f=h.width/2;var g=h.height;a.autoClear&&a.clear();h.scissor.set(0,
0,f,g);h.viewport.set(0,0,f,g);a.setRenderTarget(h);a.render(e,d.cameraL);a.clearDepth();h.scissor.set(f,0,f,g);h.viewport.set(f,0,f,g);a.setRenderTarget(h);a.render(e,d.cameraR);a.clearDepth();a.setRenderTarget(null);a.render(c,b)}},fa=function(a){var b=new e.StereoCamera;b.aspect=.5;var c=new e.Vector2;this.setEyeSeparation=function(a){b.eyeSep=a};this.setSize=function(b,c){a.setSize(b,c)};this.render=function(d,e){d.updateMatrixWorld();null===e.parent&&e.updateMatrixWorld();b.update(e);a.getSize(c);
a.autoClear&&a.clear();a.setScissorTest(!0);a.setScissor(0,0,c.width/2,c.height);a.setViewport(0,0,c.width/2,c.height);a.render(d,b.cameraL);a.setScissor(c.width/2,0,c.width/2,c.height);a.setViewport(c.width/2,0,c.width/2,c.height);a.render(d,b.cameraR);a.setScissorTest(!1)}},g=function(a){var b=e.EventDispatcher.call(this)||this;a=a||{};a.controlBar=void 0!==a.controlBar?a.controlBar:!0;a.controlButtons=a.controlButtons||["fullscreen","setting","video"];a.autoHideControlBar=void 0!==a.autoHideControlBar?
a.autoHideControlBar:!1;a.autoHideInfospot=void 0!==a.autoHideInfospot?a.autoHideInfospot:!0;a.horizontalView=void 0!==a.horizontalView?a.horizontalView:!1;a.clickTolerance=a.clickTolerance||10;a.cameraFov=a.cameraFov||60;a.reverseDragging=a.reverseDragging||!1;a.enableReticle=a.enableReticle||!1;a.dwellTime=a.dwellTime||1500;a.autoReticleSelect=void 0!==a.autoReticleSelect?a.autoReticleSelect:!0;a.viewIndicator=void 0!==a.viewIndicator?a.viewIndicator:!1;a.indicatorSize=a.indicatorSize||30;a.output=
a.output?a.output:"none";a.autoRotate=a.autoRotate||!1;a.autoRotateSpeed=a.autoRotateSpeed||2;a.autoRotateActivationDuration=a.autoRotateActivationDuration||5E3;b.options=a;if(a.container){var c=a.container;c._width=c.clientWidth;c._height=c.clientHeight}else c=document.createElement("div"),c.classList.add("panolens-container"),c.style.width="100%",c.style.height="100%",c._width=window.innerWidth,c._height=window.innerHeight,document.body.appendChild(c);b.container=c;b.camera=a.camera||new e.PerspectiveCamera(b.options.cameraFov,
b.container.clientWidth/b.container.clientHeight,1,1E4);b.scene=a.scene||new e.Scene;b.renderer=a.renderer||new e.WebGLRenderer({alpha:!0,antialias:!1});b.sceneReticle=new e.Scene;b.viewIndicatorSize=b.options.indicatorSize;b.reticle={};b.tempEnableReticle=b.options.enableReticle;b.mode=q.NORMAL;b.panorama=null;b.widget=null;b.hoverObject=null;b.infospot=null;b.pressEntityObject=null;b.pressObject=null;b.raycaster=new e.Raycaster;b.raycasterPoint=new e.Vector2;b.userMouse=new e.Vector2;b.updateCallbacks=
[];b.requestAnimationId=null;b.cameraFrustum=new e.Frustum;b.cameraViewProjectionMatrix=new e.Matrix4;b.autoRotateRequestId=null;b.outputDivElement=null;b.touchSupported="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;b.HANDLER_MOUSE_DOWN=b.onMouseDown.bind(b);b.HANDLER_MOUSE_UP=b.onMouseUp.bind(b);b.HANDLER_MOUSE_MOVE=b.onMouseMove.bind(b);b.HANDLER_WINDOW_RESIZE=b.onWindowResize.bind(b);b.HANDLER_KEY_DOWN=b.onKeyDown.bind(b);b.HANDLER_KEY_UP=b.onKeyUp.bind(b);b.HANDLER_TAP=
b.onTap.bind(b,{clientX:b.container.clientWidth/2,clientY:b.container.clientHeight/2});b.OUTPUT_INFOSPOT=!1;b.tweenLeftAnimation=new t.Tween;b.tweenUpAnimation=new t.Tween;b.renderer.setPixelRatio(window.devicePixelRatio);b.renderer.setSize(b.container.clientWidth,b.container.clientHeight);b.renderer.setClearColor(0,0);b.renderer.autoClear=!1;b.renderer.domElement.classList.add("panolens-canvas");b.renderer.domElement.style.display="block";b.container.style.backgroundColor="#000";b.container.appendChild(b.renderer.domElement);
b.OrbitControls=new T(b.camera,b.container);b.OrbitControls.id="orbit";b.OrbitControls.minDistance=1;b.OrbitControls.noPan=!0;b.OrbitControls.autoRotate=b.options.autoRotate;b.OrbitControls.autoRotateSpeed=b.options.autoRotateSpeed;b.DeviceOrientationControls=new V(b.camera,b.container);b.DeviceOrientationControls.id="device-orientation";b.DeviceOrientationControls.enabled=!1;b.camera.position.z=1;b.options.passiveRendering&&console.warn("passiveRendering is now deprecated");b.controls=[b.OrbitControls,
b.DeviceOrientationControls];b.control=b.OrbitControls;b.CardboardEffect=new ea(b.renderer);b.CardboardEffect.setSize(b.container.clientWidth,b.container.clientHeight);b.StereoEffect=new fa(b.renderer);b.StereoEffect.setSize(b.container.clientWidth,b.container.clientHeight);b.effect=b.CardboardEffect;b.addReticle();b.options.horizontalView&&(b.OrbitControls.minPolarAngle=Math.PI/2,b.OrbitControls.maxPolarAngle=Math.PI/2);!1!==b.options.controlBar&&b.addDefaultControlBar(b.options.controlButtons);
b.options.viewIndicator&&b.addViewIndicator();b.options.reverseDragging&&b.reverseDraggingDirection();b.options.enableReticle?b.enableReticleControl():b.registerMouseAndTouchEvents();"overlay"===b.options.output&&b.addOutputElement();b.registerEventListeners();b.animate.call(b);return b};$jscomp.inherits(g,e.EventDispatcher);g.prototype.add=function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}this.scene.add(a);a.addEventListener&&a.addEventListener("panolens-viewer-handler",
this.eventHandler.bind(this));a instanceof l&&a.dispatchEvent&&a.dispatchEvent({type:"panolens-container",container:this.container});a instanceof H&&a.dispatchEvent({type:"panolens-scene",scene:this.scene});"panorama"===a.type&&(this.addPanoramaEventListener(a),this.panorama||this.setPanorama(a))};g.prototype.remove=function(a){a.removeEventListener&&a.removeEventListener("panolens-viewer-handler",this.eventHandler.bind(this));this.scene.remove(a)};g.prototype.addDefaultControlBar=function(a){if(this.widget)console.warn("Default control bar exists");
else{var b=new x(this.container);b.addEventListener("panolens-viewer-handler",this.eventHandler.bind(this));b.addControlBar();a.forEach(function(a){b.addControlButton(a)});this.widget=b}};g.prototype.setPanorama=function(a){var b=this.panorama;if("panorama"===a.type&&b!==a){this.hideInfospot();var c=function(){if(b)b.onLeave();a.removeEventListener("enter-fade-start",c)};a.addEventListener("enter-fade-start",c);(this.panorama=a).onEnter()}};g.prototype.eventHandler=function(a){if(a.method&&this[a.method])this[a.method](a.data)};
g.prototype.dispatchEventToChildren=function(a){this.scene.traverse(function(b){b.dispatchEvent&&b.dispatchEvent(a)})};g.prototype.activateWidgetItem=function(a,b){if(this.widget){var c=this.widget.mainMenu,d=c.children[0];c=c.children[1];if(void 0!==a){switch(a){case 0:a=d.subMenu.children[1];break;case 1:a=d.subMenu.children[2];break;default:a=d.subMenu.children[1]}d.subMenu.setActiveItem(a);d.setSelectionTitle(a.textContent)}if(void 0!==b){switch(b){case q.CARDBOARD:a=c.subMenu.children[2];break;
case q.STEREO:a=c.subMenu.children[3];break;default:a=c.subMenu.children[1]}c.subMenu.setActiveItem(a);c.setSelectionTitle(a.textContent)}}};g.prototype.enableEffect=function(a){if(this.mode!==a)if(a===q.NORMAL)this.disableEffect();else{this.mode=a;var b=this.camera.fov;switch(a){case q.CARDBOARD:this.effect=this.CardboardEffect;this.enableReticleControl();break;case q.STEREO:this.effect=this.StereoEffect;this.enableReticleControl();break;default:this.effect=null,this.disableReticleControl()}this.activateWidgetItem(void 0,
this.mode);this.dispatchEventToChildren({type:"panolens-dual-eye-effect",mode:this.mode});this.camera.fov=b+.01;this.effect.setSize(this.container.clientWidth,this.container.clientHeight);this.render();this.camera.fov=b;this.dispatchEvent({type:"mode-change",mode:this.mode})}};g.prototype.disableEffect=function(){this.mode!==q.NORMAL&&(this.mode=q.NORMAL,this.disableReticleControl(),this.activateWidgetItem(void 0,this.mode),this.dispatchEventToChildren({type:"panolens-dual-eye-effect",mode:this.mode}),
this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.render(),this.dispatchEvent({type:"mode-change",mode:this.mode}))};g.prototype.enableReticleControl=function(){this.reticle.visible||(this.tempEnableReticle=!0,this.unregisterMouseAndTouchEvents(),this.reticle.show(),this.registerReticleEvent(),this.updateReticleEvent())};g.prototype.disableReticleControl=function(){this.tempEnableReticle=!1;this.options.enableReticle?this.updateReticleEvent():(this.reticle.hide(),
this.unregisterReticleEvent(),this.registerMouseAndTouchEvents())};g.prototype.enableAutoRate=function(){this.options.autoRotate=!0;this.OrbitControls.autoRotate=!0};g.prototype.disableAutoRate=function(){clearTimeout(this.autoRotateRequestId);this.options.autoRotate=!1;this.OrbitControls.autoRotate=!1};g.prototype.toggleVideoPlay=function(a){this.panorama instanceof w&&this.panorama.dispatchEvent({type:"video-toggle",pause:a})};g.prototype.setVideoCurrentTime=function(a){this.panorama instanceof
w&&this.panorama.dispatchEvent({type:"video-time",percentage:a})};g.prototype.onVideoUpdate=function(a){var b=this.widget;b&&b.dispatchEvent({type:"video-update",percentage:a})};g.prototype.addUpdateCallback=function(a){a&&this.updateCallbacks.push(a)};g.prototype.removeUpdateCallback=function(a){var b=this.updateCallbacks.indexOf(a);a&&0<=b&&this.updateCallbacks.splice(b,1)};g.prototype.showVideoWidget=function(){var a=this.widget;a&&a.dispatchEvent({type:"video-control-show"})};g.prototype.hideVideoWidget=
function(){var a=this.widget;a&&a.dispatchEvent({type:"video-control-hide"})};g.prototype.updateVideoPlayButton=function(a){var b=this.widget;b&&b.videoElement&&b.videoElement.controlButton&&b.videoElement.controlButton.update(a)};g.prototype.addPanoramaEventListener=function(a){a.addEventListener("enter-fade-start",this.setCameraControl.bind(this));a instanceof w&&(a.addEventListener("enter-fade-start",this.showVideoWidget.bind(this)),a.addEventListener("leave",function(){this.panorama instanceof
w||this.hideVideoWidget.call(this)}.bind(this)))};g.prototype.setCameraControl=function(){this.OrbitControls.target.copy(this.panorama.position)};g.prototype.getControl=function(){return this.control};g.prototype.getScene=function(){return this.scene};g.prototype.getCamera=function(){return this.camera};g.prototype.getRenderer=function(){return this.renderer};g.prototype.getContainer=function(){return this.container};g.prototype.getControlId=function(){return this.control.id};g.prototype.getNextControlId=
function(){return this.controls[this.getNextControlIndex()].id};g.prototype.getNextControlIndex=function(){var a=this.controls,b=a.indexOf(this.control)+1;return b>=a.length?0:b};g.prototype.setCameraFov=function(a){this.camera.fov=a;this.camera.updateProjectionMatrix()};g.prototype.enableControl=function(a){a=0<=a&&a<this.controls.length?a:0;this.control.enabled=!1;this.control=this.controls[a];this.control.enabled=!0;switch(a){case M.ORBIT:this.camera.position.copy(this.panorama.position);this.camera.position.z+=
1;break;case M.DEVICEORIENTATION:this.camera.position.copy(this.panorama.position)}this.control.update();this.activateWidgetItem(a,void 0)};g.prototype.disableControl=function(){this.control.enabled=!1};g.prototype.toggleNextControl=function(){this.enableControl(this.getNextControlIndex())};g.prototype.getScreenVector=function(a){a=a.clone();var b=this.container.clientWidth/2,c=this.container.clientHeight/2;a.project(this.camera);a.x=a.x*b+b;a.y=-(a.y*c)+c+this.container.getBoundingClientRect().top;
a.z=0;return a};g.prototype.checkSpriteInViewport=function(a){this.camera.matrixWorldInverse.getInverse(this.camera.matrixWorld);this.cameraViewProjectionMatrix.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse);this.cameraFrustum.setFromMatrix(this.cameraViewProjectionMatrix);return a.visible&&this.cameraFrustum.intersectsSprite(a)};g.prototype.reverseDraggingDirection=function(){this.OrbitControls.rotateSpeed*=-1;this.OrbitControls.momentumScalingFactor*=-1};g.prototype.addReticle=
function(){this.reticle=new B(16777215,!0,this.options.dwellTime);this.reticle.hide();this.camera.add(this.reticle);this.sceneReticle.add(this.camera)};g.prototype.tweenControlCenter=function(a,b,c){var d;if(this.control===this.OrbitControls){a instanceof Array&&(b=a[1],c=a[2],a=a[0]);b=void 0!==b?b:1E3;c=c||t.Easing.Exponential.Out;var h=this;var g=this.camera.getWorldDirection(new e.Vector3);var k=g.clone();var l=this.panorama.getWorldPosition(new e.Vector3).sub(this.camera.getWorldPosition(new e.Vector3));
a=a.clone();a.x*=-1;a.add(l).normalize();var m=a.clone();g.y=0;a.y=0;l=Math.atan2(a.z,a.x)-Math.atan2(g.z,g.x);l=l>Math.PI?l-2*Math.PI:l;l=l<-Math.PI?l+2*Math.PI:l;g=Math.abs(k.angleTo(g)+(0>=k.y*m.y?m.angleTo(a):-m.angleTo(a)));g*=m.y<k.y?1:-1;k={left:0,up:0};var p=d=0;this.tweenLeftAnimation.stop();this.tweenUpAnimation.stop();this.tweenLeftAnimation=(new t.Tween(k)).to({left:l},b).easing(c).onUpdate(function(a){h.control.rotateLeft(a.left-d);d=a.left}).start();this.tweenUpAnimation=(new t.Tween(k)).to({up:g},
b).easing(c).onUpdate(function(a){h.control.rotateUp(a.up-p);p=a.up}).start()}};g.prototype.tweenControlCenterByObject=function(a,b,c){var d=!1;a.traverseAncestors(function(a){a.scalePlaceHolder&&(d=!0)});if(d){var g=new e.Vector3(-1,1,1);this.tweenControlCenter(a.getWorldPosition(new e.Vector3).multiply(g),b,c)}else this.tweenControlCenter(a.getWorldPosition(new e.Vector3),b,c)};g.prototype.onWindowResize=function(a,b){var c=this.container.classList.contains("panolens-container")||this.container.isFullscreen;
if(void 0!==a&&void 0!==b){var d=a;var e=b;this.container._width=a;this.container._height=b}else a=(b=/(android)/i.test(window.navigator.userAgent))?Math.min(document.documentElement.clientWidth,window.innerWidth||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0),b=b?Math.min(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientHeight,window.innerHeight||0),d=c?a:this.container.clientWidth,e=c?b:this.container.clientHeight,this.container._width=
d,this.container._height=e;this.camera.aspect=d/e;this.camera.updateProjectionMatrix();this.renderer.setSize(d,e);(this.options.enableReticle||this.tempEnableReticle)&&this.updateReticleEvent();this.dispatchEvent({type:"window-resize",width:d,height:e});this.scene.traverse(function(a){a.dispatchEvent&&a.dispatchEvent({type:"window-resize",width:d,height:e})})};g.prototype.addOutputElement=function(){var a=document.createElement("div");a.style.position="absolute";a.style.right="10px";a.style.top="10px";
a.style.color="#fff";this.container.appendChild(a);this.outputDivElement=a};g.prototype.outputPosition=function(){var a=this.raycaster.intersectObject(this.panorama,!0);if(0<a.length){a=a[0].point.clone();var b=new e.Vector3(-1,1,1),c=this.panorama.getWorldPosition(new e.Vector3);a.sub(c).multiply(b);b={x:a.x.toFixed(2),y:a.y.toFixed(2),z:a.z.toFixed(2)};c=b.x+", "+b.y+", "+b.z;if(0!==a.length())switch(this.options.output){case "event":this.dispatchEvent({type:"position-output",position:b});break;
case "console":console.info(c);break;case "overlay":this.outputDivElement.textContent=c}}};g.prototype.onMouseDown=function(a){a.preventDefault();this.userMouse.x=0<=a.clientX?a.clientX:a.touches[0].clientX;this.userMouse.y=0<=a.clientY?a.clientY:a.touches[0].clientY;this.userMouse.type="mousedown";this.onTap(a)};g.prototype.onMouseMove=function(a){a.preventDefault();this.userMouse.type="mousemove";this.onTap(a)};g.prototype.onMouseUp=function(a){this.userMouse.type="mouseup";var b=this.userMouse.x>=
a.clientX-this.options.clickTolerance&&this.userMouse.x<=a.clientX+this.options.clickTolerance&&this.userMouse.y>=a.clientY-this.options.clickTolerance&&this.userMouse.y<=a.clientY+this.options.clickTolerance||a.changedTouches&&this.userMouse.x>=a.changedTouches[0].clientX-this.options.clickTolerance&&this.userMouse.x<=a.changedTouches[0].clientX+this.options.clickTolerance&&this.userMouse.y>=a.changedTouches[0].clientY-this.options.clickTolerance&&this.userMouse.y<=a.changedTouches[0].clientY+this.options.clickTolerance?
"click":void 0;if(!a||!a.target||a.target.classList.contains("panolens-canvas"))if(a.preventDefault(),a=a.changedTouches&&1===a.changedTouches.length?this.onTap({clientX:a.changedTouches[0].clientX,clientY:a.changedTouches[0].clientY},b):this.onTap(a,b),this.userMouse.type="none",!a&&"click"===b){b=this.options;a=b.autoHideControlBar;var c=this.panorama,d=this.toggleControlBar;b.autoHideInfospot&&c&&c.toggleInfospotVisibility();a&&d()}};g.prototype.onTap=function(a,b){var c=this.container.getBoundingClientRect(),
d=c.top,e=this.container,g=e.clientHeight;this.raycasterPoint.x=(a.clientX-c.left)/e.clientWidth*2-1;this.raycasterPoint.y=2*-((a.clientY-d)/g)+1;this.raycaster.setFromCamera(this.raycasterPoint,this.camera);if(this.panorama){("mousedown"!==a.type&&this.touchSupported||this.OUTPUT_INFOSPOT)&&this.outputPosition();c=this.raycaster.intersectObjects(this.panorama.children,!0);d=this.getConvertedIntersect(c);e=0<c.length?c[0].object:void 0;"mouseup"===this.userMouse.type&&(d&&this.pressEntityObject===
d&&this.pressEntityObject.dispatchEvent&&this.pressEntityObject.dispatchEvent({type:"pressstop-entity",mouseEvent:a}),this.pressEntityObject=void 0);"mouseup"===this.userMouse.type&&(e&&this.pressObject===e&&this.pressObject.dispatchEvent&&this.pressObject.dispatchEvent({type:"pressstop",mouseEvent:a}),this.pressObject=void 0);if("click"===b)this.panorama.dispatchEvent({type:"click",intersects:c,mouseEvent:a}),d&&d.dispatchEvent&&d.dispatchEvent({type:"click-entity",mouseEvent:a}),e&&e.dispatchEvent&&
e.dispatchEvent({type:"click",mouseEvent:a});else{this.panorama.dispatchEvent({type:"hover",intersects:c,mouseEvent:a});if(this.hoverObject&&0<c.length&&this.hoverObject!==d||this.hoverObject&&0===c.length)this.hoverObject.dispatchEvent&&(this.hoverObject.dispatchEvent({type:"hoverleave",mouseEvent:a}),this.reticle.end()),this.hoverObject=void 0;d&&0<c.length&&(this.hoverObject!==d&&(this.hoverObject=d,this.hoverObject.dispatchEvent&&(this.hoverObject.dispatchEvent({type:"hoverenter",mouseEvent:a}),
(this.options.autoReticleSelect&&this.options.enableReticle||this.tempEnableReticle)&&this.reticle.start(this.onTap.bind(this,a,"click")))),"mousedown"===this.userMouse.type&&this.pressEntityObject!=d&&(this.pressEntityObject=d,this.pressEntityObject.dispatchEvent&&this.pressEntityObject.dispatchEvent({type:"pressstart-entity",mouseEvent:a})),"mousedown"===this.userMouse.type&&this.pressObject!=e&&(this.pressObject=e,this.pressObject.dispatchEvent&&this.pressObject.dispatchEvent({type:"pressstart",
mouseEvent:a})),"mousemove"===this.userMouse.type||this.options.enableReticle)&&(e&&e.dispatchEvent&&e.dispatchEvent({type:"hover",mouseEvent:a}),this.pressEntityObject&&this.pressEntityObject.dispatchEvent&&this.pressEntityObject.dispatchEvent({type:"pressmove-entity",mouseEvent:a}),this.pressObject&&this.pressObject.dispatchEvent&&this.pressObject.dispatchEvent({type:"pressmove",mouseEvent:a}));!d&&this.pressEntityObject&&this.pressEntityObject.dispatchEvent&&(this.pressEntityObject.dispatchEvent({type:"pressstop-entity",
mouseEvent:a}),this.pressEntityObject=void 0);!e&&this.pressObject&&this.pressObject.dispatchEvent&&(this.pressObject.dispatchEvent({type:"pressstop",mouseEvent:a}),this.pressObject=void 0)}if(e&&e instanceof p){if(this.infospot=e,"click"===b)return!0}else this.infospot&&this.hideInfospot();this.options.autoRotate&&"mousemove"!==this.userMouse.type&&(clearTimeout(this.autoRotateRequestId),this.control===this.OrbitControls&&(this.OrbitControls.autoRotate=!1,this.autoRotateRequestId=window.setTimeout(this.enableAutoRate.bind(this),
this.options.autoRotateActivationDuration)))}};g.prototype.getConvertedIntersect=function(a){for(var b,c=0;c<a.length;c++)if(0<=a[c].distance&&a[c].object&&!a[c].object.passThrough&&(!a[c].object.entity||!a[c].object.entity.passThrough)){b=a[c].object.entity&&!a[c].object.entity.passThrough?a[c].object.entity:a[c].object;break}return b};g.prototype.hideInfospot=function(){this.infospot&&(this.infospot.onHoverEnd(),this.infospot=void 0)};g.prototype.toggleControlBar=function(){var a=this.widget;a&&
a.dispatchEvent({type:"control-bar-toggle"})};g.prototype.onKeyDown=function(a){this.options.output&&"none"!==this.options.output&&"Control"===a.key&&(this.OUTPUT_INFOSPOT=!0)};g.prototype.onKeyUp=function(){this.OUTPUT_INFOSPOT=!1};g.prototype.update=function(){t.update();this.updateCallbacks.forEach(function(a){a()});this.control.update();this.scene.traverse(function(a){if(a instanceof p&&a.element&&(this.hoverObject===a||"none"!==a.element.style.display||a.element.left&&"none"!==a.element.left.style.display||
a.element.right&&"none"!==a.element.right.style.display))if(this.checkSpriteInViewport(a)){var b=this.getScreenVector(a.getWorldPosition(new e.Vector3));a.translateElement(b.x,b.y)}else a.onDismiss()}.bind(this))};g.prototype.render=function(){this.mode===q.CARDBOARD||this.mode===q.STEREO?(this.renderer.clear(),this.effect.render(this.scene,this.camera),this.effect.render(this.sceneReticle,this.camera)):(this.renderer.clear(),this.renderer.render(this.scene,this.camera),this.renderer.clearDepth(),
this.renderer.render(this.sceneReticle,this.camera))};g.prototype.animate=function(){this.requestAnimationId=window.requestAnimationFrame(this.animate.bind(this));this.onChange()};g.prototype.onChange=function(){this.update();this.render()};g.prototype.registerMouseAndTouchEvents=function(){var a={passive:!1};this.container.addEventListener("mousedown",this.HANDLER_MOUSE_DOWN,a);this.container.addEventListener("mousemove",this.HANDLER_MOUSE_MOVE,a);this.container.addEventListener("mouseup",this.HANDLER_MOUSE_UP,
a);this.container.addEventListener("touchstart",this.HANDLER_MOUSE_DOWN,a);this.container.addEventListener("touchend",this.HANDLER_MOUSE_UP,a)};g.prototype.unregisterMouseAndTouchEvents=function(){this.container.removeEventListener("mousedown",this.HANDLER_MOUSE_DOWN,!1);this.container.removeEventListener("mousemove",this.HANDLER_MOUSE_MOVE,!1);this.container.removeEventListener("mouseup",this.HANDLER_MOUSE_UP,!1);this.container.removeEventListener("touchstart",this.HANDLER_MOUSE_DOWN,!1);this.container.removeEventListener("touchend",
this.HANDLER_MOUSE_UP,!1)};g.prototype.registerReticleEvent=function(){this.addUpdateCallback(this.HANDLER_TAP)};g.prototype.unregisterReticleEvent=function(){this.removeUpdateCallback(this.HANDLER_TAP)};g.prototype.updateReticleEvent=function(){var a=this.container.clientWidth/2+this.container.offsetLeft,b=this.container.clientHeight/2;this.removeUpdateCallback(this.HANDLER_TAP);this.HANDLER_TAP=this.onTap.bind(this,{clientX:a,clientY:b});this.addUpdateCallback(this.HANDLER_TAP)};g.prototype.registerEventListeners=
function(){window.addEventListener("resize",this.HANDLER_WINDOW_RESIZE,!0);window.addEventListener("keydown",this.HANDLER_KEY_DOWN,!0);window.addEventListener("keyup",this.HANDLER_KEY_UP,!0)};g.prototype.unregisterEventListeners=function(){window.removeEventListener("resize",this.HANDLER_WINDOW_RESIZE,!0);window.removeEventListener("keydown",this.HANDLER_KEY_DOWN,!0);window.removeEventListener("keyup",this.HANDLER_KEY_UP,!0)};g.prototype.dispose=function(){function a(b){for(var c=b.children.length-
1;0<=c;c--)a(b.children[c]),b.remove(b.children[c]);b instanceof l||b instanceof p?b.dispose():b.dispatchEvent&&b.dispatchEvent("dispose")}this.tweenLeftAnimation.stop();this.tweenUpAnimation.stop();this.unregisterEventListeners();a(this.scene);this.widget&&(this.widget.dispose(),this.widget=null);e.Cache&&e.Cache.enabled&&e.Cache.clear()};g.prototype.destroy=function(){this.dispose();this.render();window.cancelAnimationFrame(this.requestAnimationId)};g.prototype.onPanoramaDispose=function(a){a instanceof
w&&this.hideVideoWidget();a===this.panorama&&(this.panorama=null)};g.prototype.loadAsyncRequest=function(a,b){b=void 0===b?function(){}:b;var c=new window.XMLHttpRequest;c.onloadend=function(a){b(a)};c.open("GET",a,!0);c.send(null)};g.prototype.addViewIndicator=function(){var a=this;this.loadAsyncRequest(y.ViewIndicator,function(b){if(0!==b.loaded){b=b.target.responseXML.documentElement;b.style.width=a.viewIndicatorSize+"px";b.style.height=a.viewIndicatorSize+"px";b.style.position="absolute";b.style.top=
"10px";b.style.left="10px";b.style.opacity="0.5";b.style.cursor="pointer";b.id="panolens-view-indicator-container";a.container.appendChild(b);var c=b.querySelector("#indicator");a.addUpdateCallback(function(){a.radius=.225*a.viewIndicatorSize;a.currentPanoAngle=a.camera.rotation.y-e.Math.degToRad(90);a.fovAngle=e.Math.degToRad(a.camera.fov);a.leftAngle=-a.currentPanoAngle-a.fovAngle/2;a.rightAngle=-a.currentPanoAngle+a.fovAngle/2;a.leftX=a.radius*Math.cos(a.leftAngle);a.leftY=a.radius*Math.sin(a.leftAngle);
a.rightX=a.radius*Math.cos(a.rightAngle);a.rightY=a.radius*Math.sin(a.rightAngle);a.indicatorD="M "+a.leftX+" "+a.leftY+" A "+a.radius+" "+a.radius+" 0 0 1 "+a.rightX+" "+a.rightY;a.leftX&&a.leftY&&a.rightX&&a.rightY&&a.radius&&c.setAttribute("d",a.indicatorD)});b.addEventListener("mouseenter",function(){this.style.opacity="1"});b.addEventListener("mouseleave",function(){this.style.opacity="0.5"})}})};g.prototype.appendControlItem=function(a){var b=this.widget.createCustomItem(a);"video"===a.group?
this.widget.videoElement.appendChild(b):this.widget.barElement.appendChild(b);return b};g.prototype.clearAllCache=function(){e.Cache.clear()};"136"!=e.REVISION&&console.warn("three.js version is not matched. Please consider use the target revision 136");window.TWEEN=t;k.BasicPanorama=ba;k.CONTROLS=M;k.CONTROL_BUTTONS={FULLSCREEN:"fullscreen",SETTING:"setting",VIDEO:"video"};k.CameraPanorama=H;k.CubePanorama=G;k.CubeTextureLoader=Z;k.DataImage=y;k.EmptyPanorama=aa;k.GoogleStreetviewPanorama=F;k.ImageLittlePlanet=
N;k.ImageLoader=S;k.ImagePanorama=z;k.Infospot=p;k.LittlePlanet=r;k.MODES=q;k.Media=D;k.OUTPUTS={NONE:"none",CONSOLE:"console",OVERLAY:"overlay"};k.Panorama=l;k.REVISION="0";k.Reticle=B;k.THREE_REVISION="136";k.THREE_VERSION=u;k.TextureLoader=Q;k.VERSION="0.0.10";k.VideoPanorama=w;k.Viewer=g;k.Widget=x;Object.defineProperty(k,"__esModule",{value:!0})});
